// Build date: 2017-0816T10:37:50

/*
* Author    Jonathan Lurie - http://me.jonahanlurie.fr
* License   MIT
* Link      https://github.com/jonathanlurie/pixbincodec
* Lab       MCIN - http://mcin.ca/ - Montreal Neurological Institute
*/
/*
 Chen, Yi-Cyuan 2014-2017
 @license MIT
*/
'use strict';(function(R,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports):"function"===typeof define&&define.amd?define(["exports"],ea):ea(R.pixbincodec=R.pixbincodec||{})})(this,function(R){function ea(a,d){return d={exports:{}},a(d,d.exports),d.exports}function fa(a){for(var d=a.length;0<=--d;)a[d]=0}function wa(a,d,b,c,f){this.static_tree=a;this.extra_bits=d;this.extra_base=b;this.elems=c;this.max_length=f;this.has_stree=a&&a.length}function xa(a,d){this.dyn_tree=a;this.max_code=
0;this.stat_desc=d}function ka(a,d){a.pending_buf[a.pending++]=d&255;a.pending_buf[a.pending++]=d>>>8&255}function G(a,d,b){a.bi_valid>16-b?(a.bi_buf|=d<<a.bi_valid&65535,ka(a,a.bi_buf),a.bi_buf=d>>16-a.bi_valid,a.bi_valid+=b-16):(a.bi_buf|=d<<a.bi_valid&65535,a.bi_valid+=b)}function M(a,d,b){G(a,b[2*d],b[2*d+1])}function Ha(a,d){var b=0;do b|=a&1,a>>>=1,b<<=1;while(0<--d);return b>>>1}function Ia(a,d,b){var c=Array(16),f=0,g;for(g=1;15>=g;g++)c[g]=f=f+b[g-1]<<1;for(b=0;b<=d;b++)f=a[2*b+1],0!==f&&
(a[2*b]=Ha(c[f]++,f))}function Ja(a){var d;for(d=0;286>d;d++)a.dyn_ltree[2*d]=0;for(d=0;30>d;d++)a.dyn_dtree[2*d]=0;for(d=0;19>d;d++)a.bl_tree[2*d]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function Ka(a){8<a.bi_valid?ka(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function La(a,d,b,c){var f=2*d,g=2*b;return a[f]<a[g]||a[f]===a[g]&&c[d]<=c[b]}function ya(a,d,b){for(var c=a.heap[b],f=b<<1;f<=a.heap_len;){f<a.heap_len&&La(d,a.heap[f+
1],a.heap[f],a.depth)&&f++;if(La(d,c,a.heap[f],a.depth))break;a.heap[b]=a.heap[f];b=f;f<<=1}a.heap[b]=c}function Ma(a,d,b){var c,f,g=0,e,l;if(0!==a.last_lit){do c=a.pending_buf[a.d_buf+2*g]<<8|a.pending_buf[a.d_buf+2*g+1],f=a.pending_buf[a.l_buf+g],g++,0===c?M(a,f,d):(e=la[f],M(a,e+256+1,d),l=za[e],0!==l&&(f-=Aa[e],G(a,f,l)),c--,e=256>c?W[c]:W[256+(c>>>7)],M(a,e,b),l=ta[e],0!==l&&(c-=ua[e],G(a,c,l)));while(g<a.last_lit)}M(a,256,d)}function Ba(a,d){var b=d.dyn_tree,c=d.stat_desc.static_tree,f=d.stat_desc.has_stree,
g=d.stat_desc.elems,e,l=-1,n;a.heap_len=0;a.heap_max=573;for(e=0;e<g;e++)0!==b[2*e]?(a.heap[++a.heap_len]=l=e,a.depth[e]=0):b[2*e+1]=0;for(;2>a.heap_len;)n=a.heap[++a.heap_len]=2>l?++l:0,b[2*n]=1,a.depth[n]=0,a.opt_len--,f&&(a.static_len-=c[2*n+1]);d.max_code=l;for(e=a.heap_len>>1;1<=e;e--)ya(a,b,e);n=g;do e=a.heap[1],a.heap[1]=a.heap[a.heap_len--],ya(a,b,1),c=a.heap[1],a.heap[--a.heap_max]=e,a.heap[--a.heap_max]=c,b[2*n]=b[2*e]+b[2*c],a.depth[n]=(a.depth[e]>=a.depth[c]?a.depth[e]:a.depth[c])+1,b[2*
e+1]=b[2*c+1]=n,a.heap[1]=n++,ya(a,b,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];e=d.dyn_tree;n=d.max_code;var c=d.stat_desc.static_tree,f=d.stat_desc.has_stree,g=d.stat_desc.extra_bits,h=d.stat_desc.extra_base,m=d.stat_desc.max_length,x,r,k,p,u=0;for(r=0;15>=r;r++)a.bl_count[r]=0;e[2*a.heap[a.heap_max]+1]=0;for(d=a.heap_max+1;573>d;d++)x=a.heap[d],r=e[2*e[2*x+1]+1]+1,r>m&&(r=m,u++),e[2*x+1]=r,x>n||(a.bl_count[r]++,k=0,x>=h&&(k=g[x-h]),p=e[2*x],a.opt_len+=p*(r+k),f&&(a.static_len+=p*(c[2*
x+1]+k)));if(0!==u){do{for(r=m-1;0===a.bl_count[r];)r--;a.bl_count[r]--;a.bl_count[r+1]+=2;a.bl_count[m]--;u-=2}while(0<u);for(r=m;0!==r;r--)for(x=a.bl_count[r];0!==x;)c=a.heap[--d],c>n||(e[2*c+1]!==r&&(a.opt_len+=(r-e[2*c+1])*e[2*c],e[2*c+1]=r),x--)}Ia(b,l,a.bl_count)}function Na(a,d,b){var c,f=-1,g,e=d[1],l=0,n=7,h=4;0===e&&(n=138,h=3);d[2*(b+1)+1]=65535;for(c=0;c<=b;c++)g=e,e=d[2*(c+1)+1],++l<n&&g===e||(l<h?a.bl_tree[2*g]+=l:0!==g?(g!==f&&a.bl_tree[2*g]++,a.bl_tree[32]++):10>=l?a.bl_tree[34]++:
a.bl_tree[36]++,l=0,f=g,0===e?(n=138,h=3):g===e?(n=6,h=3):(n=7,h=4))}function Oa(a,d,b){var c,f=-1,g,e=d[1],l=0,n=7,h=4;0===e&&(n=138,h=3);for(c=0;c<=b;c++)if(g=e,e=d[2*(c+1)+1],!(++l<n&&g===e)){if(l<h){do M(a,g,a.bl_tree);while(0!==--l)}else 0!==g?(g!==f&&(M(a,g,a.bl_tree),l--),M(a,16,a.bl_tree),G(a,l-3,2)):10>=l?(M(a,17,a.bl_tree),G(a,l-3,3)):(M(a,18,a.bl_tree),G(a,l-11,7));l=0;f=g;0===e?(n=138,h=3):g===e?(n=6,h=3):(n=7,h=4)}}function mb(a){var d=4093624447,b;for(b=0;31>=b;b++,d>>>=1)if(d&1&&0!==
a.dyn_ltree[2*b])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(b=32;256>b;b++)if(0!==a.dyn_ltree[2*b])return 1;return 0}function Pa(a,d,b,c){G(a,0+(c?1:0),3);Ka(a);ka(a,b);ka(a,~b);u.arraySet(a.pending_buf,a.window,d,b,a.pending);a.pending+=b}function S(a,d){a.msg=ga[d];return d}function T(a){for(var d=a.length;0<=--d;)a[d]=0}function U(a){var d=a.state,b=d.pending;b>a.avail_out&&(b=a.avail_out);0!==b&&(u.arraySet(a.output,d.pending_buf,d.pending_out,b,a.next_out),
a.next_out+=b,d.pending_out+=b,a.total_out+=b,a.avail_out-=b,d.pending-=b,0===d.pending&&(d.pending_out=0))}function z(a,d){F._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,d);a.block_start=a.strstart;U(a.strm)}function q(a,d){a.pending_buf[a.pending++]=d}function ma(a,d){a.pending_buf[a.pending++]=d>>>8&255;a.pending_buf[a.pending++]=d&255}function Qa(a,d){var b=a.max_chain_length,c=a.strstart,f,g=a.prev_length,e=a.nice_match,l=a.strstart>a.w_size-262?a.strstart-(a.w_size-
262):0,n=a.window,h=a.w_mask,m=a.prev,x=a.strstart+258,r=n[c+g-1],k=n[c+g];a.prev_length>=a.good_match&&(b>>=2);e>a.lookahead&&(e=a.lookahead);do if(f=d,n[f+g]===k&&n[f+g-1]===r&&n[f]===n[c]&&n[++f]===n[c+1]){c+=2;for(f++;n[++c]===n[++f]&&n[++c]===n[++f]&&n[++c]===n[++f]&&n[++c]===n[++f]&&n[++c]===n[++f]&&n[++c]===n[++f]&&n[++c]===n[++f]&&n[++c]===n[++f]&&c<x;);f=258-(x-c);c=x-258;if(f>g){a.match_start=d;g=f;if(f>=e)break;r=n[c+g-1];k=n[c+g]}}while((d=m[d&h])>l&&0!==--b);return g<=a.lookahead?g:a.lookahead}
function Y(a){var d=a.w_size,b,c,f,g;do{g=a.window_size-a.lookahead-a.strstart;if(a.strstart>=d+(d-262)){u.arraySet(a.window,a.window,d,d,0);a.match_start-=d;a.strstart-=d;a.block_start-=d;b=c=a.hash_size;do f=a.head[--b],a.head[b]=f>=d?f-d:0;while(--c);b=c=d;do f=a.prev[--b],a.prev[b]=f>=d?f-d:0;while(--c);g+=d}if(0===a.strm.avail_in)break;b=a.strm;c=a.window;f=a.strstart+a.lookahead;var e=b.avail_in;e>g&&(e=g);0===e?c=0:(b.avail_in-=e,u.arraySet(c,b.input,b.next_in,e,f),1===b.state.wrap?b.adler=
na(b.adler,c,e,f):2===b.state.wrap&&(b.adler=D(b.adler,c,e,f)),b.next_in+=e,b.total_in+=e,c=e);a.lookahead+=c;if(3<=a.lookahead+a.insert)for(g=a.strstart-a.insert,a.ins_h=a.window[g],a.ins_h=(a.ins_h<<a.hash_shift^a.window[g+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[g+3-1])&a.hash_mask,a.prev[g&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=g,g++,a.insert--,3>a.lookahead+a.insert););}while(262>a.lookahead&&0!==a.strm.avail_in)}function Ca(a,d){for(var b;;){if(262>a.lookahead){Y(a);
if(262>a.lookahead&&0===d)return 1;if(0===a.lookahead)break}b=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,b=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);0!==b&&a.strstart-b<=a.w_size-262&&(a.match_length=Qa(a,b));if(3<=a.match_length)if(b=F._tr_tally(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^
a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else b=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(b&&(z(a,!1),0===a.strm.avail_out))return 1}a.insert=2>a.strstart?a.strstart:2;return 4===d?(z(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&
(z(a,!1),0===a.strm.avail_out)?1:2}function ha(a,d){for(var b,c;;){if(262>a.lookahead){Y(a);if(262>a.lookahead&&0===d)return 1;if(0===a.lookahead)break}b=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,b=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=2;0!==b&&a.prev_length<a.max_lazy_match&&a.strstart-b<=a.w_size-262&&(a.match_length=Qa(a,b),5>=a.match_length&&(1===
a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&(a.match_length=2));if(3<=a.prev_length&&a.match_length<=a.prev_length){c=a.strstart+a.lookahead-3;b=F._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=c&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);a.match_available=0;a.match_length=2;a.strstart++;
if(b&&(z(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((b=F._tr_tally(a,0,a.window[a.strstart-1]))&&z(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(F._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=2>a.strstart?a.strstart:2;return 4===d?(z(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(z(a,!1),0===a.strm.avail_out)?1:2}function nb(a,d){for(var b,c,f,g=a.window;;){if(258>=
a.lookahead){Y(a);if(258>=a.lookahead&&0===d)return 1;if(0===a.lookahead)break}a.match_length=0;if(3<=a.lookahead&&0<a.strstart&&(c=a.strstart-1,b=g[c],b===g[++c]&&b===g[++c]&&b===g[++c])){for(f=a.strstart+258;b===g[++c]&&b===g[++c]&&b===g[++c]&&b===g[++c]&&b===g[++c]&&b===g[++c]&&b===g[++c]&&b===g[++c]&&c<f;);a.match_length=258-(f-c);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}3<=a.match_length?(b=F._tr_tally(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,
a.match_length=0):(b=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(b&&(z(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===d?(z(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(z(a,!1),0===a.strm.avail_out)?1:2}function ob(a,d){for(var b;;){if(0===a.lookahead&&(Y(a),0===a.lookahead)){if(0===d)return 1;break}a.match_length=0;b=F._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(b&&(z(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===d?(z(a,!0),0===
a.strm.avail_out?3:4):a.last_lit&&(z(a,!1),0===a.strm.avail_out)?1:2}function N(a,d,b,c,f){this.good_length=a;this.max_lazy=d;this.nice_length=b;this.max_chain=c;this.func=f}function pb(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=
this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new u.Buf16(1146);this.dyn_dtree=new u.Buf16(122);this.bl_tree=new u.Buf16(78);T(this.dyn_ltree);T(this.dyn_dtree);T(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new u.Buf16(16);this.heap=new u.Buf16(573);
T(this.heap);this.heap_max=this.heap_len=0;this.depth=new u.Buf16(573);T(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function Ra(a){var d;if(!a||!a.state)return S(a,-2);a.total_in=a.total_out=0;a.data_type=2;d=a.state;d.pending=0;d.pending_out=0;0>d.wrap&&(d.wrap=-d.wrap);d.status=d.wrap?42:113;a.adler=2===d.wrap?0:1;d.last_flush=0;F._tr_init(d);return 0}function Sa(a){var d=Ra(a);0===d&&(a=a.state,
a.window_size=2*a.w_size,T(a.head),a.max_lazy_match=ia[a.level].max_lazy,a.good_match=ia[a.level].good_length,a.nice_match=ia[a.level].nice_length,a.max_chain_length=ia[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return d}function Ta(a,d,b,c,f,g){if(!a)return-2;var e=1;-1===d&&(d=6);0>c?(e=0,c=-c):15<c&&(e=2,c-=16);if(1>f||9<f||8!==b||8>c||15<c||0>d||9<d||0>g||4<g)return S(a,-2);8===c&&(c=9);var l=new pb;a.state=
l;l.strm=a;l.wrap=e;l.gzhead=null;l.w_bits=c;l.w_size=1<<l.w_bits;l.w_mask=l.w_size-1;l.hash_bits=f+7;l.hash_size=1<<l.hash_bits;l.hash_mask=l.hash_size-1;l.hash_shift=~~((l.hash_bits+3-1)/3);l.window=new u.Buf8(2*l.w_size);l.head=new u.Buf16(l.hash_size);l.prev=new u.Buf16(l.w_size);l.lit_bufsize=1<<f+6;l.pending_buf_size=4*l.lit_bufsize;l.pending_buf=new u.Buf8(l.pending_buf_size);l.d_buf=1*l.lit_bufsize;l.l_buf=3*l.lit_bufsize;l.level=d;l.strategy=g;l.method=b;return Sa(a)}function Ua(a,d){if(65537>
d&&(a.subarray&&Va||!a.subarray&&Wa))return String.fromCharCode.apply(null,u.shrinkBuf(a,d));for(var b="",c=0;c<d;c++)b+=String.fromCharCode(a[c]);return b}function Z(a){if(!(this instanceof Z))return new Z(a);a=this.options=u.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&16>a.windowBits&&(a.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Xa;this.strm.avail_out=
0;var d=oa.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(0!==d)throw Error(ga[d]);a.header&&oa.deflateSetHeader(this.strm,a.header);if(a.dictionary){a="string"===typeof a.dictionary?aa.string2buf(a.dictionary):"[object ArrayBuffer]"===Ya.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary;d=oa.deflateSetDictionary(this.strm,a);if(0!==d)throw Error(ga[d]);this._dict_set=!0}}function Da(a,d){d=new Z(d);d.push(a,!0);if(d.err)throw d.msg||ga[d.err];return d.result}
function Za(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function qb(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new u.Buf16(320);this.work=new u.Buf16(288);this.distdyn=
this.lendyn=null;this.was=this.back=this.sane=0}function $a(a){var d;if(!a||!a.state)return-2;d=a.state;a.total_in=a.total_out=d.total=0;a.msg="";d.wrap&&(a.adler=d.wrap&1);d.mode=1;d.last=0;d.havedict=0;d.dmax=32768;d.head=null;d.hold=0;d.bits=0;d.lencode=d.lendyn=new u.Buf32(852);d.distcode=d.distdyn=new u.Buf32(592);d.sane=1;d.back=-1;return 0}function ab(a){var d;if(!a||!a.state)return-2;d=a.state;d.wsize=0;d.whave=0;d.wnext=0;return $a(a)}function bb(a,d){var b,c;if(!a||!a.state)return-2;c=a.state;
0>d?(b=0,d=-d):(b=(d>>4)+1,48>d&&(d&=15));if(d&&(8>d||15<d))return-2;null!==c.window&&c.wbits!==d&&(c.window=null);c.wrap=b;c.wbits=d;return ab(a)}function cb(a,d){var b;if(!a)return-2;b=new qb;a.state=b;b.window=null;d=bb(a,d);0!==d&&(a.state=null);return d}function db(a,d,b,c){var f=a.state;null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new u.Buf8(f.wsize));c>=f.wsize?(u.arraySet(f.window,d,b-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(a=f.wsize-f.wnext,a>c&&(a=c),u.arraySet(f.window,
d,b-c,a,f.wnext),(c-=a)?(u.arraySet(f.window,d,b-c,c,0),f.wnext=c,f.whave=f.wsize):(f.wnext+=a,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=a)));return 0}function ba(a){if(!(this instanceof ba))return new ba(a);var d=this.options=u.assign({chunkSize:16384,windowBits:0,to:""},a||{});d.raw&&0<=d.windowBits&&16>d.windowBits&&(d.windowBits=-d.windowBits,0===d.windowBits&&(d.windowBits=-15));!(0<=d.windowBits&&16>d.windowBits)||a&&a.windowBits||(d.windowBits+=32);15<d.windowBits&&48>d.windowBits&&
0===(d.windowBits&15)&&(d.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Xa;this.strm.avail_out=0;a=pa.inflateInit2(this.strm,d.windowBits);if(a!==A.Z_OK)throw Error(ga[a]);this.header=new rb;pa.inflateGetHeader(this.strm,this.header)}function Ea(a,d){d=new ba(d);d.push(a,!0);if(d.err)throw d.msg||ga[d.err];return d.result}var sb="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u=ea(function(a,d){a="undefined"!==
typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;d.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a};d.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var b={arraySet:function(a,b,c,d,n){if(b.subarray&&a.subarray)a.set(b.subarray(c,
c+d),n);else for(var f=0;f<d;f++)a[n+f]=b[c+f]},flattenChunks:function(a){var b,c,d,f,h;b=d=0;for(c=a.length;b<c;b++)d+=a[b].length;h=new Uint8Array(d);b=d=0;for(c=a.length;b<c;b++)f=a[b],h.set(f,d),d+=f.length;return h}},c={arraySet:function(a,b,c,d,n){for(var f=0;f<d;f++)a[n+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};d.setTyped=function(a){a?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,b)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,c))};
d.setTyped(a)}),za=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ta=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],tb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],eb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=Array(576);fa(Q);var qa=Array(60);fa(qa);var W=Array(512);fa(W);var la=Array(256);fa(la);var Aa=Array(29);fa(Aa);var ua=Array(30);fa(ua);var fb,gb,hb,ib=!1,F={_tr_init:function(a){if(!ib){var d,b,c,f=Array(16);for(c=b=0;28>c;c++)for(Aa[c]=b,d=0;d<1<<za[c];d++)la[b++]=
c;la[b-1]=c;for(c=b=0;16>c;c++)for(ua[c]=b,d=0;d<1<<ta[c];d++)W[b++]=c;for(b>>=7;30>c;c++)for(ua[c]=b<<7,d=0;d<1<<ta[c]-7;d++)W[256+b++]=c;for(d=0;15>=d;d++)f[d]=0;for(d=0;143>=d;)Q[2*d+1]=8,d++,f[8]++;for(;255>=d;)Q[2*d+1]=9,d++,f[9]++;for(;279>=d;)Q[2*d+1]=7,d++,f[7]++;for(;287>=d;)Q[2*d+1]=8,d++,f[8]++;Ia(Q,287,f);for(d=0;30>d;d++)qa[2*d+1]=5,qa[2*d]=Ha(d,5);fb=new wa(Q,za,257,286,15);gb=new wa(qa,ta,0,30,15);hb=new wa([],tb,0,19,7);ib=!0}a.l_desc=new xa(a.dyn_ltree,fb);a.d_desc=new xa(a.dyn_dtree,
gb);a.bl_desc=new xa(a.bl_tree,hb);a.bi_buf=0;a.bi_valid=0;Ja(a)},_tr_stored_block:Pa,_tr_flush_block:function(a,d,b,c){var f,g,e=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=mb(a));Ba(a,a.l_desc);Ba(a,a.d_desc);Na(a,a.dyn_ltree,a.l_desc.max_code);Na(a,a.dyn_dtree,a.d_desc.max_code);Ba(a,a.bl_desc);for(e=18;3<=e&&0===a.bl_tree[2*eb[e]+1];e--);a.opt_len+=3*(e+1)+14;f=a.opt_len+3+7>>>3;g=a.static_len+3+7>>>3;g<=f&&(f=g)}else f=g=b+5;if(b+4<=f&&-1!==d)Pa(a,d,b,c);else if(4===a.strategy||g===
f)G(a,2+(c?1:0),3),Ma(a,Q,qa);else{G(a,4+(c?1:0),3);d=a.l_desc.max_code+1;b=a.d_desc.max_code+1;e+=1;G(a,d-257,5);G(a,b-1,5);G(a,e-4,4);for(f=0;f<e;f++)G(a,a.bl_tree[2*eb[f]+1],3);Oa(a,a.dyn_ltree,d-1);Oa(a,a.dyn_dtree,b-1);Ma(a,a.dyn_ltree,a.dyn_dtree)}Ja(a);c&&Ka(a)},_tr_tally:function(a,d,b){a.pending_buf[a.d_buf+2*a.last_lit]=d>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=d&255;a.pending_buf[a.l_buf+a.last_lit]=b&255;a.last_lit++;0===d?a.dyn_ltree[2*b]++:(a.matches++,d--,a.dyn_ltree[2*(la[b]+
256+1)]++,a.dyn_dtree[2*(256>d?W[d]:W[256+(d>>>7)])]++);return a.last_lit===a.lit_bufsize-1},_tr_align:function(a){G(a,2,3);M(a,256,Q);16===a.bi_valid?(ka(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}},na=function(a,d,b,c){var f=a&65535|0;a=a>>>16&65535|0;for(var g;0!==b;){g=2E3<b?2E3:b;b-=g;do f=f+d[c++]|0,a=a+f|0;while(--g);f%=65521;a%=65521}return f|a<<16|0},ub=function(){for(var a,d=[],b=0;256>b;b++){a=b;for(var c=0;8>
c;c++)a=a&1?3988292384^a>>>1:a>>>1;d[b]=a}return d}(),D=function(a,d,b,c){b=c+b;for(a^=-1;c<b;c++)a=a>>>8^ub[(a^d[c])&255];return a^-1},ga={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ia;ia=[new N(0,0,0,0,function(a,d){var b=65535;for(b>a.pending_buf_size-5&&(b=a.pending_buf_size-5);;){if(1>=a.lookahead){Y(a);if(0===a.lookahead&&0===d)return 1;if(0===a.lookahead)break}a.strstart+=
a.lookahead;a.lookahead=0;var c=a.block_start+b;if(0===a.strstart||a.strstart>=c)if(a.lookahead=a.strstart-c,a.strstart=c,z(a,!1),0===a.strm.avail_out)return 1;if(a.strstart-a.block_start>=a.w_size-262&&(z(a,!1),0===a.strm.avail_out))return 1}a.insert=0;if(4===d)return z(a,!0),0===a.strm.avail_out?3:4;a.strstart>a.block_start&&z(a,!1);return 1}),new N(4,4,8,4,Ca),new N(4,5,16,8,Ca),new N(4,6,32,32,Ca),new N(4,4,16,16,ha),new N(8,16,32,32,ha),new N(8,16,128,128,ha),new N(8,32,128,256,ha),new N(32,
128,258,1024,ha),new N(32,258,258,4096,ha)];var oa={deflateInit:function(a,d){return Ta(a,d,8,15,8,0)},deflateInit2:Ta,deflateReset:Sa,deflateResetKeep:Ra,deflateSetHeader:function(a,d){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=d;return 0},deflate:function(a,d){var b,c,f,g;if(!a||!a.state||5<d||0>d)return a?S(a,-2):-2;c=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===c.status&&4!==d)return S(a,0===a.avail_out?-5:-2);c.strm=a;b=c.last_flush;c.last_flush=d;42===c.status&&(2===
c.wrap?(a.adler=0,q(c,31),q(c,139),q(c,8),c.gzhead?(q(c,(c.gzhead.text?1:0)+(c.gzhead.hcrc?2:0)+(c.gzhead.extra?4:0)+(c.gzhead.name?8:0)+(c.gzhead.comment?16:0)),q(c,c.gzhead.time&255),q(c,c.gzhead.time>>8&255),q(c,c.gzhead.time>>16&255),q(c,c.gzhead.time>>24&255),q(c,9===c.level?2:2<=c.strategy||2>c.level?4:0),q(c,c.gzhead.os&255),c.gzhead.extra&&c.gzhead.extra.length&&(q(c,c.gzhead.extra.length&255),q(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(a.adler=D(a.adler,c.pending_buf,c.pending,0)),
c.gzindex=0,c.status=69):(q(c,0),q(c,0),q(c,0),q(c,0),q(c,0),q(c,9===c.level?2:2<=c.strategy||2>c.level?4:0),q(c,3),c.status=113)):(f=8+(c.w_bits-8<<4)<<8,f|=(2<=c.strategy||2>c.level?0:6>c.level?1:6===c.level?2:3)<<6,0!==c.strstart&&(f|=32),c.status=113,ma(c,f+(31-f%31)),0!==c.strstart&&(ma(c,a.adler>>>16),ma(c,a.adler&65535)),a.adler=1));if(69===c.status)if(c.gzhead.extra){for(f=c.pending;c.gzindex<(c.gzhead.extra.length&65535)&&(c.pending!==c.pending_buf_size||(c.gzhead.hcrc&&c.pending>f&&(a.adler=
D(a.adler,c.pending_buf,c.pending-f,f)),U(a),f=c.pending,c.pending!==c.pending_buf_size));)q(c,c.gzhead.extra[c.gzindex]&255),c.gzindex++;c.gzhead.hcrc&&c.pending>f&&(a.adler=D(a.adler,c.pending_buf,c.pending-f,f));c.gzindex===c.gzhead.extra.length&&(c.gzindex=0,c.status=73)}else c.status=73;if(73===c.status)if(c.gzhead.name){f=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>f&&(a.adler=D(a.adler,c.pending_buf,c.pending-f,f)),U(a),f=c.pending,c.pending===c.pending_buf_size)){g=
1;break}g=c.gzindex<c.gzhead.name.length?c.gzhead.name.charCodeAt(c.gzindex++)&255:0;q(c,g)}while(0!==g);c.gzhead.hcrc&&c.pending>f&&(a.adler=D(a.adler,c.pending_buf,c.pending-f,f));0===g&&(c.gzindex=0,c.status=91)}else c.status=91;if(91===c.status)if(c.gzhead.comment){f=c.pending;do{if(c.pending===c.pending_buf_size&&(c.gzhead.hcrc&&c.pending>f&&(a.adler=D(a.adler,c.pending_buf,c.pending-f,f)),U(a),f=c.pending,c.pending===c.pending_buf_size)){g=1;break}g=c.gzindex<c.gzhead.comment.length?c.gzhead.comment.charCodeAt(c.gzindex++)&
255:0;q(c,g)}while(0!==g);c.gzhead.hcrc&&c.pending>f&&(a.adler=D(a.adler,c.pending_buf,c.pending-f,f));0===g&&(c.status=103)}else c.status=103;103===c.status&&(c.gzhead.hcrc?(c.pending+2>c.pending_buf_size&&U(a),c.pending+2<=c.pending_buf_size&&(q(c,a.adler&255),q(c,a.adler>>8&255),a.adler=0,c.status=113)):c.status=113);if(0!==c.pending){if(U(a),0===a.avail_out)return c.last_flush=-1,0}else if(0===a.avail_in&&(d<<1)-(4<d?9:0)<=(b<<1)-(4<b?9:0)&&4!==d)return S(a,-5);if(666===c.status&&0!==a.avail_in)return S(a,
-5);if(0!==a.avail_in||0!==c.lookahead||0!==d&&666!==c.status){b=2===c.strategy?ob(c,d):3===c.strategy?nb(c,d):ia[c.level].func(c,d);if(3===b||4===b)c.status=666;if(1===b||3===b)return 0===a.avail_out&&(c.last_flush=-1),0;if(2===b&&(1===d?F._tr_align(c):5!==d&&(F._tr_stored_block(c,0,0,!1),3===d&&(T(c.head),0===c.lookahead&&(c.strstart=0,c.block_start=0,c.insert=0))),U(a),0===a.avail_out))return c.last_flush=-1,0}if(4!==d)return 0;if(0>=c.wrap)return 1;2===c.wrap?(q(c,a.adler&255),q(c,a.adler>>8&
255),q(c,a.adler>>16&255),q(c,a.adler>>24&255),q(c,a.total_in&255),q(c,a.total_in>>8&255),q(c,a.total_in>>16&255),q(c,a.total_in>>24&255)):(ma(c,a.adler>>>16),ma(c,a.adler&65535));U(a);0<c.wrap&&(c.wrap=-c.wrap);return 0!==c.pending?0:1},deflateEnd:function(a){var d;if(!a||!a.state)return-2;d=a.state.status;if(42!==d&&69!==d&&73!==d&&91!==d&&103!==d&&113!==d&&666!==d)return S(a,-2);a.state=null;return 113===d?S(a,-3):0},deflateSetDictionary:function(a,d){var b=d.length,c,f,g,e,l;if(!a||!a.state)return-2;
c=a.state;f=c.wrap;if(2===f||1===f&&42!==c.status||c.lookahead)return-2;1===f&&(a.adler=na(a.adler,d,b,0));c.wrap=0;b>=c.w_size&&(0===f&&(T(c.head),c.strstart=0,c.block_start=0,c.insert=0),g=new u.Buf8(c.w_size),u.arraySet(g,d,b-c.w_size,c.w_size,0),d=g,b=c.w_size);g=a.avail_in;e=a.next_in;l=a.input;a.avail_in=b;a.next_in=0;a.input=d;for(Y(c);3<=c.lookahead;){d=c.strstart;b=c.lookahead-2;do c.ins_h=(c.ins_h<<c.hash_shift^c.window[d+3-1])&c.hash_mask,c.prev[d&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=
d,d++;while(--b);c.strstart=d;c.lookahead=2;Y(c)}c.strstart+=c.lookahead;c.block_start=c.strstart;c.insert=c.lookahead;c.lookahead=0;c.match_length=c.prev_length=2;c.match_available=0;a.next_in=e;a.input=l;a.avail_in=g;c.wrap=f;return 0},deflateInfo:"pako deflate (from Nodeca project)"},Wa=!0,Va=!0;try{String.fromCharCode.apply(null,[0])}catch(a){Wa=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){Va=!1}for(var ra=new u.Buf8(256),V=0;256>V;V++)ra[V]=252<=V?6:248<=V?5:240<=V?4:224<=
V?3:192<=V?2:1;ra[254]=ra[254]=1;var aa={string2buf:function(a){var d,b,c,f,g,e=a.length,l=0;for(f=0;f<e;f++)b=a.charCodeAt(f),55296===(b&64512)&&f+1<e&&(c=a.charCodeAt(f+1),56320===(c&64512)&&(b=65536+(b-55296<<10)+(c-56320),f++)),l+=128>b?1:2048>b?2:65536>b?3:4;d=new u.Buf8(l);for(f=g=0;g<l;f++)b=a.charCodeAt(f),55296===(b&64512)&&f+1<e&&(c=a.charCodeAt(f+1),56320===(c&64512)&&(b=65536+(b-55296<<10)+(c-56320),f++)),128>b?d[g++]=b:(2048>b?d[g++]=192|b>>>6:(65536>b?d[g++]=224|b>>>12:(d[g++]=240|b>>>
18,d[g++]=128|b>>>12&63),d[g++]=128|b>>>6&63),d[g++]=128|b&63);return d},buf2binstring:function(a){return Ua(a,a.length)},binstring2buf:function(a){for(var d=new u.Buf8(a.length),b=0,c=d.length;b<c;b++)d[b]=a.charCodeAt(b);return d},buf2string:function(a,d){var b,c,f,g=d||a.length,e=Array(2*g);for(d=b=0;d<g;)if(c=a[d++],128>c)e[b++]=c;else if(f=ra[c],4<f)e[b++]=65533,d+=f-1;else{for(c&=2===f?31:3===f?15:7;1<f&&d<g;)c=c<<6|a[d++]&63,f--;1<f?e[b++]=65533:65536>c?e[b++]=c:(c-=65536,e[b++]=55296|c>>10&
1023,e[b++]=56320|c&1023)}return Ua(e,b)},utf8border:function(a,d){var b;d=d||a.length;d>a.length&&(d=a.length);for(b=d-1;0<=b&&128===(a[b]&192);)b--;return 0>b||0===b?d:b+ra[a[b]]>d?b:d}},Xa=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0},Ya=Object.prototype.toString;Z.prototype.push=function(a,d){var b=this.strm,c=this.options.chunkSize;if(this.ended)return!1;
d=d===~~d?d:!0===d?4:0;"string"===typeof a?b.input=aa.string2buf(a):"[object ArrayBuffer]"===Ya.call(a)?b.input=new Uint8Array(a):b.input=a;b.next_in=0;b.avail_in=b.input.length;do{0===b.avail_out&&(b.output=new u.Buf8(c),b.next_out=0,b.avail_out=c);a=oa.deflate(b,d);if(1!==a&&0!==a)return this.onEnd(a),this.ended=!0,!1;if(0===b.avail_out||0===b.avail_in&&(4===d||2===d))if("string"===this.options.to)this.onData(aa.buf2binstring(u.shrinkBuf(b.output,b.next_out)));else this.onData(u.shrinkBuf(b.output,
b.next_out))}while((0<b.avail_in||0===b.avail_out)&&1!==a);if(4===d)return a=oa.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,0===a;2===d&&(this.onEnd(0),b.avail_out=0);return!0};Z.prototype.onData=function(a){this.chunks.push(a)};Z.prototype.onEnd=function(a){0===a&&(this.result="string"===this.options.to?this.chunks.join(""):u.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var vb={Deflate:Z,deflate:Da,deflateRaw:function(a,d){d=d||{};d.raw=!0;return Da(a,d)},gzip:function(a,
d){d=d||{};d.gzip=!0;return Da(a,d)}},wb=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],xb=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],yb=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],zb=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],sa=function(a,d,b,c,f,g,e,l){var n=l.bits,h,m,x,
r,k,p,X,t,H,L,I,C,ca,B=0,y,q=new u.Buf16(16);k=new u.Buf16(16);var v,A=0,D,w,z;for(h=0;15>=h;h++)q[h]=0;for(m=0;m<c;m++)q[d[b+m]]++;r=n;for(x=15;1<=x&&0===q[x];x--);r>x&&(r=x);if(0===x)return f[g++]=20971520,f[g++]=20971520,l.bits=1,0;for(n=1;n<x&&0===q[n];n++);r<n&&(r=n);for(h=p=1;15>=h;h++)if(p<<=1,p-=q[h],0>p)return-1;if(0<p&&(0===a||1!==x))return-1;k[1]=0;for(h=1;15>h;h++)k[h+1]=k[h]+q[h];for(m=0;m<c;m++)0!==d[b+m]&&(e[k[d[b+m]]++]=m);0===a?(ca=v=e,y=19):1===a?(ca=wb,B-=257,v=xb,A-=257,y=256):
(ca=yb,v=zb,y=-1);m=t=0;h=n;C=g;c=r;k=0;L=-1;X=1<<r;I=X-1;if(1===a&&852<X||2===a&&592<X)return 1;for(;;){D=h-k;e[m]<y?(w=0,z=e[m]):e[m]>y?(w=v[A+e[m]],z=ca[B+e[m]]):(w=96,z=0);p=1<<h-k;n=H=1<<c;do H-=p,f[C+(t>>k)+H]=D<<24|w<<16|z|0;while(0!==H);for(p=1<<h-1;t&p;)p>>=1;0!==p?(t&=p-1,t+=p):t=0;m++;if(0===--q[h]){if(h===x)break;h=d[b+e[m]]}if(h>r&&(t&I)!==L){0===k&&(k=r);C+=n;c=h-k;for(p=1<<c;c+k<x;){p-=q[c+k];if(0>=p)break;c++;p<<=1}X+=1<<c;if(1===a&&852<X||2===a&&592<X)return 1;L=t&I;f[L]=r<<24|c<<
16|C-g|0}}0!==t&&(f[C+t]=h-k<<24|4194304);l.bits=r;return 0},jb=!0,Fa,Ga,pa={inflateReset:ab,inflateReset2:bb,inflateResetKeep:$a,inflateInit:function(a){return cb(a,15)},inflateInit2:cb,inflate:function(a,d){var b,c,f,g,e,l,n,h,m,x,r,k,p,q,t,H,L,I,C=new u.Buf8(4),ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;b=a.state;12===b.mode&&(b.mode=13);e=a.next_out;f=a.output;n=a.avail_out;g=a.next_in;c=a.input;l=a.avail_in;h=b.hold;m=b.bits;
x=l;r=n;I=0;a:for(;;)switch(b.mode){case 1:if(0===b.wrap){b.mode=13;break}for(;16>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}if(b.wrap&2&&35615===h){b.check=0;C[0]=h&255;C[1]=h>>>8&255;b.check=D(b.check,C,2,0);m=h=0;b.mode=2;break}b.flags=0;b.head&&(b.head.done=!1);if(!(b.wrap&1)||(((h&255)<<8)+(h>>8))%31){a.msg="incorrect header check";b.mode=30;break}if(8!==(h&15)){a.msg="unknown compression method";b.mode=30;break}h>>>=4;m-=4;p=(h&15)+8;if(0===b.wbits)b.wbits=p;else if(p>b.wbits){a.msg="invalid window size";
b.mode=30;break}b.dmax=1<<p;a.adler=b.check=1;b.mode=h&512?10:12;m=h=0;break;case 2:for(;16>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}b.flags=h;if(8!==(b.flags&255)){a.msg="unknown compression method";b.mode=30;break}if(b.flags&57344){a.msg="unknown header flags set";b.mode=30;break}b.head&&(b.head.text=h>>8&1);b.flags&512&&(C[0]=h&255,C[1]=h>>>8&255,b.check=D(b.check,C,2,0));m=h=0;b.mode=3;case 3:for(;32>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}b.head&&(b.head.time=h);b.flags&512&&(C[0]=h&255,
C[1]=h>>>8&255,C[2]=h>>>16&255,C[3]=h>>>24&255,b.check=D(b.check,C,4,0));m=h=0;b.mode=4;case 4:for(;16>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}b.head&&(b.head.xflags=h&255,b.head.os=h>>8);b.flags&512&&(C[0]=h&255,C[1]=h>>>8&255,b.check=D(b.check,C,2,0));m=h=0;b.mode=5;case 5:if(b.flags&1024){for(;16>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}b.length=h;b.head&&(b.head.extra_len=h);b.flags&512&&(C[0]=h&255,C[1]=h>>>8&255,b.check=D(b.check,C,2,0));m=h=0}else b.head&&(b.head.extra=null);b.mode=6;
case 6:if(b.flags&1024&&(k=b.length,k>l&&(k=l),k&&(b.head&&(p=b.head.extra_len-b.length,b.head.extra||(b.head.extra=Array(b.head.extra_len)),u.arraySet(b.head.extra,c,g,k,p)),b.flags&512&&(b.check=D(b.check,c,k,g)),l-=k,g+=k,b.length-=k),b.length))break a;b.length=0;b.mode=7;case 7:if(b.flags&2048){if(0===l)break a;k=0;do p=c[g+k++],b.head&&p&&65536>b.length&&(b.head.name+=String.fromCharCode(p));while(p&&k<l);b.flags&512&&(b.check=D(b.check,c,k,g));l-=k;g+=k;if(p)break a}else b.head&&(b.head.name=
null);b.length=0;b.mode=8;case 8:if(b.flags&4096){if(0===l)break a;k=0;do p=c[g+k++],b.head&&p&&65536>b.length&&(b.head.comment+=String.fromCharCode(p));while(p&&k<l);b.flags&512&&(b.check=D(b.check,c,k,g));l-=k;g+=k;if(p)break a}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(b.flags&512){for(;16>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}if(h!==(b.check&65535)){a.msg="header crc mismatch";b.mode=30;break}m=h=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0);a.adler=b.check=0;b.mode=12;break;
case 10:for(;32>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}a.adler=b.check=Za(h);m=h=0;b.mode=11;case 11:if(0===b.havedict)return a.next_out=e,a.avail_out=n,a.next_in=g,a.avail_in=l,b.hold=h,b.bits=m,2;a.adler=b.check=1;b.mode=12;case 12:if(5===d||6===d)break a;case 13:if(b.last){h>>>=m&7;m-=m&7;b.mode=27;break}for(;3>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}b.last=h&1;h>>>=1;--m;switch(h&3){case 0:b.mode=14;break;case 1:p=b;if(jb){Fa=new u.Buf32(512);Ga=new u.Buf32(32);for(k=0;144>k;)p.lens[k++]=
8;for(;256>k;)p.lens[k++]=9;for(;280>k;)p.lens[k++]=7;for(;288>k;)p.lens[k++]=8;sa(1,p.lens,0,288,Fa,0,p.work,{bits:9});for(k=0;32>k;)p.lens[k++]=5;sa(2,p.lens,0,32,Ga,0,p.work,{bits:5});jb=!1}p.lencode=Fa;p.lenbits=9;p.distcode=Ga;p.distbits=5;b.mode=20;if(6===d){h>>>=2;m-=2;break a}break;case 2:b.mode=17;break;case 3:a.msg="invalid block type",b.mode=30}h>>>=2;m-=2;break;case 14:h>>>=m&7;for(m-=m&7;32>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}if((h&65535)!==(h>>>16^65535)){a.msg="invalid stored block lengths";
b.mode=30;break}b.length=h&65535;m=h=0;b.mode=15;if(6===d)break a;case 15:b.mode=16;case 16:if(k=b.length){k>l&&(k=l);k>n&&(k=n);if(0===k)break a;u.arraySet(f,c,g,k,e);l-=k;g+=k;n-=k;e+=k;b.length-=k;break}b.mode=12;break;case 17:for(;14>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}b.nlen=(h&31)+257;h>>>=5;m-=5;b.ndist=(h&31)+1;h>>>=5;m-=5;b.ncode=(h&15)+4;h>>>=4;m-=4;if(286<b.nlen||30<b.ndist){a.msg="too many length or distance symbols";b.mode=30;break}b.have=0;b.mode=18;case 18:for(;b.have<b.ncode;){for(;3>
m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}b.lens[ca[b.have++]]=h&7;h>>>=3;m-=3}for(;19>b.have;)b.lens[ca[b.have++]]=0;b.lencode=b.lendyn;b.lenbits=7;k={bits:b.lenbits};I=sa(0,b.lens,0,19,b.lencode,0,b.work,k);b.lenbits=k.bits;if(I){a.msg="invalid code lengths set";b.mode=30;break}b.have=0;b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;;){t=b.lencode[h&(1<<b.lenbits)-1];k=t>>>24;t&=65535;if(k<=m)break;if(0===l)break a;l--;h+=c[g++]<<m;m+=8}if(16>t)h>>>=k,m-=k,b.lens[b.have++]=t;else{if(16===
t){for(p=k+2;m<p;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}h>>>=k;m-=k;if(0===b.have){a.msg="invalid bit length repeat";b.mode=30;break}p=b.lens[b.have-1];k=3+(h&3);h>>>=2;m-=2}else if(17===t){for(p=k+3;m<p;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}h>>>=k;m-=k;p=0;k=3+(h&7);h>>>=3;m-=3}else{for(p=k+7;m<p;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}h>>>=k;m-=k;p=0;k=11+(h&127);h>>>=7;m-=7}if(b.have+k>b.nlen+b.ndist){a.msg="invalid bit length repeat";b.mode=30;break}for(;k--;)b.lens[b.have++]=p}}if(30===
b.mode)break;if(0===b.lens[256]){a.msg="invalid code -- missing end-of-block";b.mode=30;break}b.lenbits=9;k={bits:b.lenbits};I=sa(1,b.lens,0,b.nlen,b.lencode,0,b.work,k);b.lenbits=k.bits;if(I){a.msg="invalid literal/lengths set";b.mode=30;break}b.distbits=6;b.distcode=b.distdyn;k={bits:b.distbits};I=sa(2,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,k);b.distbits=k.bits;if(I){a.msg="invalid distances set";b.mode=30;break}b.mode=20;if(6===d)break a;case 20:b.mode=21;case 21:if(6<=l&&258<=n){a.next_out=
e;a.avail_out=n;a.next_in=g;a.avail_in=l;b.hold=h;b.bits=m;var B,y,v,A,z,G,w,F,K,E,J=a;E=J.state;K=J.next_in;f=J.input;F=K+(J.avail_in-5);w=J.next_out;c=J.output;G=w-(r-J.avail_out);z=w+(J.avail_out-257);A=E.dmax;t=E.wsize;L=E.whave;H=E.wnext;q=E.window;p=E.hold;k=E.bits;m=E.lencode;h=E.distcode;n=(1<<E.lenbits)-1;l=(1<<E.distbits)-1;b:do c:for(15>k&&(p+=f[K++]<<k,k+=8,p+=f[K++]<<k,k+=8),B=m[p&n];;){e=B>>>24;p>>>=e;k-=e;e=B>>>16&255;if(0===e)c[w++]=B&65535;else if(e&16){g=B&65535;if(e&=15)k<e&&(p+=
f[K++]<<k,k+=8),g+=p&(1<<e)-1,p>>>=e,k-=e;15>k&&(p+=f[K++]<<k,k+=8,p+=f[K++]<<k,k+=8);B=h[p&l];d:for(;;){e=B>>>24;p>>>=e;k-=e;e=B>>>16&255;if(e&16){v=B&65535;e&=15;k<e&&(p+=f[K++]<<k,k+=8,k<e&&(p+=f[K++]<<k,k+=8));v+=p&(1<<e)-1;if(v>A){J.msg="invalid distance too far back";E.mode=30;break b}p>>>=e;k-=e;e=w-G;if(v>e){e=v-e;if(e>L&&E.sane){J.msg="invalid distance too far back";E.mode=30;break b}y=0;B=q;if(0===H){if(y+=t-e,e<g){g-=e;do c[w++]=q[y++];while(--e);y=w-v;B=c}}else if(H<e){if(y+=t+H-e,e-=
H,e<g){g-=e;do c[w++]=q[y++];while(--e);y=0;if(H<g){e=H;g-=e;do c[w++]=q[y++];while(--e);y=w-v;B=c}}}else if(y+=H-e,e<g){g-=e;do c[w++]=q[y++];while(--e);y=w-v;B=c}for(;2<g;)c[w++]=B[y++],c[w++]=B[y++],c[w++]=B[y++],g-=3;g&&(c[w++]=B[y++],1<g&&(c[w++]=B[y++]))}else{y=w-v;do c[w++]=c[y++],c[w++]=c[y++],c[w++]=c[y++],g-=3;while(2<g);g&&(c[w++]=c[y++],1<g&&(c[w++]=c[y++]))}}else if(0===(e&64)){B=h[(B&65535)+(p&(1<<e)-1)];continue d}else{J.msg="invalid distance code";E.mode=30;break b}break}}else if(0===
(e&64)){B=m[(B&65535)+(p&(1<<e)-1)];continue c}else{e&32?E.mode=12:(J.msg="invalid literal/length code",E.mode=30);break b}break}while(K<F&&w<z);g=k>>3;K-=g;k-=g<<3;J.next_in=K;J.next_out=w;J.avail_in=K<F?5+(F-K):5-(K-F);J.avail_out=w<z?257+(z-w):257-(w-z);E.hold=p&(1<<k)-1;E.bits=k;e=a.next_out;f=a.output;n=a.avail_out;g=a.next_in;c=a.input;l=a.avail_in;h=b.hold;m=b.bits;12===b.mode&&(b.back=-1);break}for(b.back=0;;){t=b.lencode[h&(1<<b.lenbits)-1];k=t>>>24;p=t>>>16&255;t&=65535;if(k<=m)break;if(0===
l)break a;l--;h+=c[g++]<<m;m+=8}if(p&&0===(p&240)){q=k;H=p;for(L=t;;){t=b.lencode[L+((h&(1<<q+H)-1)>>q)];k=t>>>24;p=t>>>16&255;t&=65535;if(q+k<=m)break;if(0===l)break a;l--;h+=c[g++]<<m;m+=8}h>>>=q;m-=q;b.back+=q}h>>>=k;m-=k;b.back+=k;b.length=t;if(0===p){b.mode=26;break}if(p&32){b.back=-1;b.mode=12;break}if(p&64){a.msg="invalid literal/length code";b.mode=30;break}b.extra=p&15;b.mode=22;case 22:if(b.extra){for(p=b.extra;m<p;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}b.length+=h&(1<<b.extra)-1;h>>>=
b.extra;m-=b.extra;b.back+=b.extra}b.was=b.length;b.mode=23;case 23:for(;;){t=b.distcode[h&(1<<b.distbits)-1];k=t>>>24;p=t>>>16&255;t&=65535;if(k<=m)break;if(0===l)break a;l--;h+=c[g++]<<m;m+=8}if(0===(p&240)){q=k;H=p;for(L=t;;){t=b.distcode[L+((h&(1<<q+H)-1)>>q)];k=t>>>24;p=t>>>16&255;t&=65535;if(q+k<=m)break;if(0===l)break a;l--;h+=c[g++]<<m;m+=8}h>>>=q;m-=q;b.back+=q}h>>>=k;m-=k;b.back+=k;if(p&64){a.msg="invalid distance code";b.mode=30;break}b.offset=t;b.extra=p&15;b.mode=24;case 24:if(b.extra){for(p=
b.extra;m<p;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}b.offset+=h&(1<<b.extra)-1;h>>>=b.extra;m-=b.extra;b.back+=b.extra}if(b.offset>b.dmax){a.msg="invalid distance too far back";b.mode=30;break}b.mode=25;case 25:if(0===n)break a;k=r-n;if(b.offset>k){k=b.offset-k;if(k>b.whave&&b.sane){a.msg="invalid distance too far back";b.mode=30;break}k>b.wnext?(k-=b.wnext,p=b.wsize-k):p=b.wnext-k;k>b.length&&(k=b.length);q=b.window}else q=f,p=e-b.offset,k=b.length;k>n&&(k=n);n-=k;b.length-=k;do f[e++]=q[p++];while(--k);
0===b.length&&(b.mode=21);break;case 26:if(0===n)break a;f[e++]=b.length;n--;b.mode=21;break;case 27:if(b.wrap){for(;32>m;){if(0===l)break a;l--;h|=c[g++]<<m;m+=8}r-=n;a.total_out+=r;b.total+=r;r&&(a.adler=b.check=b.flags?D(b.check,f,r,e-r):na(b.check,f,r,e-r));r=n;if((b.flags?h:Za(h))!==b.check){a.msg="incorrect data check";b.mode=30;break}m=h=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;32>m;){if(0===l)break a;l--;h+=c[g++]<<m;m+=8}if(h!==(b.total&4294967295)){a.msg="incorrect length check";b.mode=
30;break}m=h=0}b.mode=29;case 29:I=1;break a;case 30:I=-3;break a;case 31:return-4;default:return-2}a.next_out=e;a.avail_out=n;a.next_in=g;a.avail_in=l;b.hold=h;b.bits=m;if((b.wsize||r!==a.avail_out&&30>b.mode&&(27>b.mode||4!==d))&&db(a,a.output,a.next_out,r-a.avail_out))return b.mode=31,-4;x-=a.avail_in;r-=a.avail_out;a.total_in+=x;a.total_out+=r;b.total+=r;b.wrap&&r&&(a.adler=b.check=b.flags?D(b.check,f,r,a.next_out-r):na(b.check,f,r,a.next_out-r));a.data_type=b.bits+(b.last?64:0)+(12===b.mode?
128:0)+(20===b.mode||15===b.mode?256:0);(0===x&&0===r||4===d)&&0===I&&(I=-5);return I},inflateEnd:function(a){if(!a||!a.state)return-2;var d=a.state;d.window&&(d.window=null);a.state=null;return 0},inflateGetHeader:function(a,d){if(!a||!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=d;d.done=!1;return 0},inflateSetDictionary:function(a,d){var b=d.length,c,f;if(!a||!a.state)return-2;c=a.state;if(0!==c.wrap&&11!==c.mode)return-2;if(11===c.mode&&(f=na(1,d,b,0),f!==c.check))return-3;if(db(a,
d,b,b))return c.mode=31,-4;c.havedict=1;return 0},inflateInfo:"pako inflate (from Nodeca project)"},A={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},rb=function(){this.os=
this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1},kb=Object.prototype.toString;ba.prototype.push=function(a,d){var b=this.strm,c=this.options.chunkSize,f=this.options.dictionary,g,e,l,n=!1;if(this.ended)return!1;d=d===~~d?d:!0===d?A.Z_FINISH:A.Z_NO_FLUSH;"string"===typeof a?b.input=aa.binstring2buf(a):"[object ArrayBuffer]"===kb.call(a)?b.input=new Uint8Array(a):b.input=a;b.next_in=0;b.avail_in=b.input.length;do{0===b.avail_out&&
(b.output=new u.Buf8(c),b.next_out=0,b.avail_out=c);a=pa.inflate(b,A.Z_NO_FLUSH);a===A.Z_NEED_DICT&&f&&(a="string"===typeof f?aa.string2buf(f):"[object ArrayBuffer]"===kb.call(f)?new Uint8Array(f):f,a=pa.inflateSetDictionary(this.strm,a));a===A.Z_BUF_ERROR&&!0===n&&(a=A.Z_OK,n=!1);if(a!==A.Z_STREAM_END&&a!==A.Z_OK)return this.onEnd(a),this.ended=!0,!1;if(b.next_out&&(0===b.avail_out||a===A.Z_STREAM_END||0===b.avail_in&&(d===A.Z_FINISH||d===A.Z_SYNC_FLUSH)))if("string"===this.options.to)g=aa.utf8border(b.output,
b.next_out),e=b.next_out-g,l=aa.buf2string(b.output,g),b.next_out=e,b.avail_out=c-e,e&&u.arraySet(b.output,b.output,g,e,0),this.onData(l);else this.onData(u.shrinkBuf(b.output,b.next_out));0===b.avail_in&&0===b.avail_out&&(n=!0)}while((0<b.avail_in||0===b.avail_out)&&a!==A.Z_STREAM_END);a===A.Z_STREAM_END&&(d=A.Z_FINISH);if(d===A.Z_FINISH)return a=pa.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===A.Z_OK;d===A.Z_SYNC_FLUSH&&(this.onEnd(A.Z_OK),b.avail_out=0);return!0};ba.prototype.onData=function(a){this.chunks.push(a)};
ba.prototype.onEnd=function(a){a===A.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):u.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var Ab=u.assign,va={};Ab(va,vb,{Inflate:ba,inflate:Ea,inflateRaw:function(a,d){d=d||{};d.raw=!0;return Ea(a,d)},ungzip:Ea},A);var v=function(){};v.isPlatformLittleEndian=function(){var a=new Uint32Array([305419896]);return 18!=(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))[0]};v.arrayBufferToString16=function(a){return String.fromCharCode.apply(null,
new Uint16Array(a))};v.string16ToArrayBuffer=function(a){for(var d=new ArrayBuffer(2*a.length),b=new Uint16Array(d),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return d};v.arrayBufferToString8=function(a){return String.fromCharCode.apply(null,new Uint8Array(a))};v.string8ToArrayBuffer=function(a){for(var d=new ArrayBuffer(a.length),b=new Uint8Array(d),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return d};v.setString8InBuffer=function(a,d,b){b=void 0===b?0:b;if(0>b)console.warn("The byte offset cannot be negative.");
else if(d&&d instanceof ArrayBuffer)if(a.length+b>d.byteLength)console.warn("The string is too long to be writen in this buffer.");else{d=new Uint8Array(d);for(var c=0;c<a.length;c++)d[c+b]=a.charCodeAt(c)}else console.warn("The buffer must be a valid ArrayBuffer.")};v.getString8FromBuffer=function(a,d,b){b=void 0===b?0:b;return 0>b?(console.warn("The byte offset cannot be negative."),null):a&&a instanceof ArrayBuffer?d+b>a.byteLength?(console.warn("The string is too long to be writen in this buffer."),
null):String.fromCharCode.apply(null,new Uint8Array(a,b,d)):(console.warn("The buffer must be a valid ArrayBuffer."),null)};v.objectToArrayBuffer=function(a){var d=null;try{var b=JSON.stringify(a),d=v.string16ToArrayBuffer(b)}catch(c){console.warn(c)}return d};v.ArrayBufferToObject=function(a){var d=null;try{var b=v.arrayBufferToString16(a),d=JSON.parse(b)}catch(c){console.warn(c)}return d};v.isTypedArray=function(a){return a instanceof Int8Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||
a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array};v.mergeBuffers=function(a){for(var d=0,b=0;b<a.length;b++)d+=a[b].byteLength;for(var d=new Uint8Array(d),c=0,b=0;b<a.length;b++)d.set(new Uint8Array(a[b]),c),c+=a[b].byteLength;return d.buffer};v.getGlobalObject=function(){var a=null;try{a=window}catch(d){try{a=GLOBAL}catch(b){return console.warn("You are not in a Javascript environment?? Weird."),
null}}return a};v.extractTypedArray=function(a,d,b,c){if(!a)return console.warn("Input Buffer is null."),null;if(!(a instanceof ArrayBuffer))return console.warn("Buffer must be of type ArrayBuffer"),null;if(0>=c)return console.warn("The number of elements to fetch must be greater than 0"),null;if(0>d)return console.warn("The byte offset must be possitive or 0"),null;if(d>=a.byteLength)return console.warn("The offset cannot be larger than the size of the buffer."),null;if(b instanceof Function&&!("BYTES_PER_ELEMENT"in
b))return console.warn("ArrayType must be a typed array constructor function."),null;if(b.BYTES_PER_ELEMENT*c+d>a.byteLength)console.warn("The requested number of elements is too large for this buffer");else return a=a.slice(d,d+c*b.BYTES_PER_ELEMENT),new b(a)};v.getTypedArrayInfo=function(a){var d=null,b=!1;a instanceof Int8Array?(d="int",b=!1):a instanceof Uint8Array?(d="int",b=!0):a instanceof Uint8ClampedArray?(d="int",b=!0):a instanceof Int16Array?(d="int",b=!1):a instanceof Uint16Array?(d="int",
b=!0):a instanceof Int32Array?(d="int",b=!1):a instanceof Uint32Array?(d="int",b=!0):a instanceof Float32Array?(d="float",b=!1):a instanceof Float64Array&&(d="float",b=!1);return{type:d,signed:b,bytesPerElements:a.BYTES_PER_ELEMENT,byteLength:a.byteLength,length:a.length}};var O=function(){this._compress=!1;this.reset()};O.prototype.reset=function(){this._output=this._input=null};O.prototype.enableDataCompression=function(a){this._compress=a};O.prototype.setInput=function(a){O.isGoodCandidate(a)&&
(this._input=a)};O.prototype.getOutput=function(){return this._output};O.isGoodCandidate=function(a){if(!a)return console.warn("Input object cannot be null."),!1;if(!("_metadata"in a))return console.warn("Input object must contain a _metadata object."),!1;if(!("_data"in a))return console.warn("Input object must contain a _data object."),!1;var d=a._metadata;a=a._data;try{JSON.stringify(d)}catch(b){console.warn("The metadata object contains cyclic structures. Cannot be used.");return}if(d instanceof
Object){if(a instanceof Array)for(d=0;d<a.length;d++){if(!v.isTypedArray(a[d])){console.warn("The data object must be a typed array or an Array of typed arrays.");return}}else if(!v.isTypedArray(a)){console.warn("The data object must be a typed array or an Array of typed arrays.");return}return!0}console.warn("The metadata object must be an instance of Object.")};O.prototype.run=function(){var a=this._input;if(a){var d=a._data,b=null,c=[],f=!1;if(Array.isArray(d))for(var f=!0,b=[],g=0;g<d.length;g++){var e=
v.getTypedArrayInfo(d[g]);e.compressedByteLength=null;if(this._compress){var l=va.deflate(d[g].buffer);e.compressedByteLength=l.byteLength;b.push(l)}c.push(e)}else e=v.getTypedArrayInfo(d),e.compressedByteLength=null,this._compress&&(b=va.deflate(d.buffer),e.compressedByteLength=b.byteLength),c.push(e);this._compress&&(d=b);g=v.objectToArrayBuffer({byteStreamInfo:c,originalBlockType:a.constructor.name,containerMeta:a._metadata});a=[(new Uint8Array([+v.isPlatformLittleEndian()])).buffer,(new Uint32Array([g.byteLength])).buffer,
g];if(f)for(g=0;g<d.length;g++)a.push(d[g].buffer);else a.push(d.buffer);this._output=v.mergeBuffers(a)}else console.warn("An input must be given to the PixBlockEncoder.")};var da=function(){this.reset()};da.prototype.reset=function(){this._output=this._input=null};da.prototype.setInput=function(a){a instanceof ArrayBuffer?this._input=a:console.warn("Input should be a valid ArrayBuffer")};da.prototype.getOutput=function(){return this._output};da.prototype.run=function(){var a=this._input,d=new DataView(a);
d.getUint8(0);var b=0;d.getUint8(0);for(var b=b+1,c=d.getUint32(1,b),b=b+4,d=a.slice(b,b+c),d=v.ArrayBufferToObject(d),b=b+c,c=[],f=0;f<d.byteStreamInfo.length;f++){var g=d.byteStreamInfo[f].compressedByteLength;if(g){var e=new Uint8Array(a,b,g),e=va.inflate(e),e=new (this._getArrayTypeFromByteStreamInfo(d.byteStreamInfo[f]))(e.buffer);c.push(e);b+=g}else e=v.extractTypedArray(a,b,this._getArrayTypeFromByteStreamInfo(d.byteStreamInfo[f]),d.byteStreamInfo[f].length),c.push(e),b+=d.byteStreamInfo[f].byteLength}1==
c.length&&(c=c[0]);this._output={originalBlockType:d.originalBlockType,_data:c,_metadata:d.containerMeta}};da.prototype._getArrayTypeFromByteStreamInfo=function(a){var d;d="int"===a.type?a.signed?"Uint":"Int":"Float";d+=8*a.bytesPerElements+"Array";return v.getGlobalObject()[d]};var lb=ea(function(a){(function(){function d(a){a?(q[0]=q[16]=q[1]=q[2]=q[3]=q[4]=q[5]=q[6]=q[7]=q[8]=q[9]=q[10]=q[11]=q[12]=q[13]=q[14]=q[15]=0,this.blocks=q,this.buffer8=r):g?(a=new ArrayBuffer(68),this.buffer8=new Uint8Array(a),
this.blocks=new Uint32Array(a)):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0;this.finalized=this.hashed=!1;this.first=!0}var b="object"===typeof window,c=b?window:{};c.JS_MD5_NO_WINDOW&&(b=!1);var b=!b&&"object"===typeof self,f=!c.JS_MD5_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node;f?c=sb:b&&(c=self);var b=!c.JS_MD5_NO_COMMON_JS&&!0&&a.exports,g=!c.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,
e="0123456789abcdef".split(""),l=[128,32768,8388608,-2147483648],n=[0,8,16,24],h="hex array digest buffer arrayBuffer base64".split(" "),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),q=[],r;if(g){var k=new ArrayBuffer(68);r=new Uint8Array(k);q=new Uint32Array(k)}if(c.JS_MD5_NO_NODE_JS||!Array.isArray)Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};var p=function(a){return function(b){return(new d(!0)).update(b)[a]()}},u=function(a){var b=
eval("require('crypto')"),c=eval("require('buffer').Buffer");return function(d){if("string"===typeof d)return b.createHash("md5").update(d,"utf8").digest("hex");if(null===d||void 0===d)throw"input is invalid type";d.constructor===ArrayBuffer&&(d=new Uint8Array(d));return Array.isArray(d)||ArrayBuffer.isView(d)||d.constructor===c?b.createHash("md5").update(new c(d)).digest("hex"):a(d)}};d.prototype.update=function(a){if(!this.finalized){var b="string"!=typeof a;if(b){if(null===a||void 0===a)throw"input is invalid type";
a.constructor===c.ArrayBuffer&&(a=new Uint8Array(a))}var d=a.length;if(b&&("number"!==typeof d||!(Array.isArray(a)||g&&ArrayBuffer.isView(a))))throw"input is invalid type";for(var f,t=0,e,h=this.blocks,k=this.buffer8;t<d;){this.hashed&&(this.hashed=!1,h[0]=h[16],h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0);if(b)if(g)for(e=this.start;t<d&&64>e;++t)k[e++]=a[t];else for(e=this.start;t<d&&64>e;++t)h[e>>2]|=a[t]<<n[e++&3];else if(g)for(e=this.start;t<d&&64>
e;++t)f=a.charCodeAt(t),128>f?k[e++]=f:(2048>f?k[e++]=192|f>>6:(55296>f||57344<=f?k[e++]=224|f>>12:(f=65536+((f&1023)<<10|a.charCodeAt(++t)&1023),k[e++]=240|f>>18,k[e++]=128|f>>12&63),k[e++]=128|f>>6&63),k[e++]=128|f&63);else for(e=this.start;t<d&&64>e;++t)f=a.charCodeAt(t),128>f?h[e>>2]|=f<<n[e++&3]:(2048>f?h[e>>2]|=(192|f>>6)<<n[e++&3]:(55296>f||57344<=f?h[e>>2]|=(224|f>>12)<<n[e++&3]:(f=65536+((f&1023)<<10|a.charCodeAt(++t)&1023),h[e>>2]|=(240|f>>18)<<n[e++&3],h[e>>2]|=(128|f>>12&63)<<n[e++&3]),
h[e>>2]|=(128|f>>6&63)<<n[e++&3]),h[e>>2]|=(128|f&63)<<n[e++&3]);this.lastByteIndex=e;this.bytes+=e-this.start;64<=e?(this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this}};d.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,b=this.lastByteIndex;a[b>>2]|=l[b&3];56<=b&&(this.hashed||this.hash(),a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0);a[14]=this.bytes<<3;this.hash()}};d.prototype.hash=function(){var a,
b,c,d,f,e=this.blocks;this.first?(a=e[0]-680876937,a=(a<<7|a>>>25)-271733879<<0,d=(-1732584194^a&2004318071)+e[1]-117830708,d=(d<<12|d>>>20)+a<<0,c=(-271733879^d&(a^-271733879))+e[2]-1126478375,c=(c<<17|c>>>15)+d<<0,b=(a^c&(d^a))+e[3]-1316259209):(a=this.h0,b=this.h1,c=this.h2,d=this.h3,a+=(d^b&(c^d))+e[0]-680876936,a=(a<<7|a>>>25)+b<<0,d+=(c^a&(b^c))+e[1]-389564586,d=(d<<12|d>>>20)+a<<0,c+=(b^d&(a^b))+e[2]+606105819,c=(c<<17|c>>>15)+d<<0,b+=(a^c&(d^a))+e[3]-1044525330);b=(b<<22|b>>>10)+c<<0;a+=(d^
b&(c^d))+e[4]-176418897;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+e[5]+1200080426;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+e[6]-1473231341;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+e[7]-45705983;b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+e[8]+1770035416;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+e[9]-1958414417;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+e[10]-42063;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+e[11]-1990404162;b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+e[12]+1804603682;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+e[13]-40341101;d=(d<<12|
d>>>20)+a<<0;c+=(b^d&(a^b))+e[14]-1502002290;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+e[15]+1236535329;b=(b<<22|b>>>10)+c<<0;a+=(c^d&(b^c))+e[1]-165796510;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+e[6]-1069501632;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+e[11]+643717713;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+e[0]-373897302;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+e[5]-701558691;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+e[10]+38016083;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+e[15]-660478335;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+e[4]-
405537848;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+e[9]+568446438;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+e[14]-1019803690;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+e[3]-187363961;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+e[8]+1163531501;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+e[13]-1444681467;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+e[2]-51403784;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+e[7]+1735328473;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+e[12]-1926607734;b=(b<<20|b>>>12)+c<<0;f=b^c;a+=(f^d)+e[5]-378558;a=(a<<4|a>>>28)+b<<0;d+=
(f^a)+e[8]-2022574463;d=(d<<11|d>>>21)+a<<0;f=d^a;c+=(f^b)+e[11]+1839030562;c=(c<<16|c>>>16)+d<<0;b+=(f^c)+e[14]-35309556;b=(b<<23|b>>>9)+c<<0;f=b^c;a+=(f^d)+e[1]-1530992060;a=(a<<4|a>>>28)+b<<0;d+=(f^a)+e[4]+1272893353;d=(d<<11|d>>>21)+a<<0;f=d^a;c+=(f^b)+e[7]-155497632;c=(c<<16|c>>>16)+d<<0;b+=(f^c)+e[10]-1094730640;b=(b<<23|b>>>9)+c<<0;f=b^c;a+=(f^d)+e[13]+681279174;a=(a<<4|a>>>28)+b<<0;d+=(f^a)+e[0]-358537222;d=(d<<11|d>>>21)+a<<0;f=d^a;c+=(f^b)+e[3]-722521979;c=(c<<16|c>>>16)+d<<0;b+=(f^c)+e[6]+
76029189;b=(b<<23|b>>>9)+c<<0;f=b^c;a+=(f^d)+e[9]-640364487;a=(a<<4|a>>>28)+b<<0;d+=(f^a)+e[12]-421815835;d=(d<<11|d>>>21)+a<<0;f=d^a;c+=(f^b)+e[15]+530742520;c=(c<<16|c>>>16)+d<<0;b+=(f^c)+e[2]-995338651;b=(b<<23|b>>>9)+c<<0;a+=(c^(b|~d))+e[0]-198630844;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+e[7]+1126891415;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+e[14]-1416354905;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+e[5]-57434055;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+e[12]+1700485571;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+e[3]-
1894986606;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+e[10]-1051523;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+e[1]-2054922799;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+e[8]+1873313359;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+e[15]-30611744;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+e[6]-1560198380;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+e[13]+1309151649;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+e[4]-145523070;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+e[11]-1120210379;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+e[2]+718787259;c=(c<<15|c>>>17)+d<<0;b+=(d^
(c|~a))+e[9]-343485551;b=(b<<21|b>>>11)+c<<0;this.first?(this.h0=a+1732584193<<0,this.h1=b-271733879<<0,this.h2=c-1732584194<<0,this.h3=d+271733878<<0,this.first=!1):(this.h0=this.h0+a<<0,this.h1=this.h1+b<<0,this.h2=this.h2+c<<0,this.h3=this.h3+d<<0)};d.prototype.hex=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return e[a>>4&15]+e[a&15]+e[a>>12&15]+e[a>>8&15]+e[a>>20&15]+e[a>>16&15]+e[a>>28&15]+e[a>>24&15]+e[b>>4&15]+e[b&15]+e[b>>12&15]+e[b>>8&15]+e[b>>20&15]+e[b>>16&15]+
e[b>>28&15]+e[b>>24&15]+e[c>>4&15]+e[c&15]+e[c>>12&15]+e[c>>8&15]+e[c>>20&15]+e[c>>16&15]+e[c>>28&15]+e[c>>24&15]+e[d>>4&15]+e[d&15]+e[d>>12&15]+e[d>>8&15]+e[d>>20&15]+e[d>>16&15]+e[d>>28&15]+e[d>>24&15]};d.prototype.toString=d.prototype.hex;d.prototype.digest=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return[a&255,a>>8&255,a>>16&255,a>>24&255,b&255,b>>8&255,b>>16&255,b>>24&255,c&255,c>>8&255,c>>16&255,c>>24&255,d&255,d>>8&255,d>>16&255,d>>24&255]};d.prototype.array=d.prototype.digest;
d.prototype.arrayBuffer=function(){this.finalize();var a=new ArrayBuffer(16),b=new Uint32Array(a);b[0]=this.h0;b[1]=this.h1;b[2]=this.h2;b[3]=this.h3;return a};d.prototype.buffer=d.prototype.arrayBuffer;d.prototype.base64=function(){for(var a,b,c,d="",e=this.array(),f=0;15>f;)a=e[f++],b=e[f++],c=e[f++],d+=m[a>>>2]+m[(a<<4|b>>>4)&63]+m[(b<<2|c>>>6)&63]+m[c&63];a=e[f];return d+=m[a>>>2]+m[a<<4&63]+"=="};k=function(){var a=p("hex");f&&(a=u(a));a.create=function(){return new d};a.update=function(b){return a.create().update(b)};
for(var b=0;b<h.length;++b){var c=h[b];a[c]=p(c)}return a}();b?a.exports=k:c.md5=k})()}),P=function(){this._compress=!0;this.reset()};P.MAGIC_NUMBER=function(){return"PIXPIPE_PIXBIN"};P.prototype.reset=function(){this._inputs=[];this._output=null;this._options={madeWith:"pixbincodec_js",userObject:null,description:null}};P.prototype.enableDataCompression=function(a){this._compress=a};P.prototype.setOption=function(a,d){a in this._options&&(this._options[a]=d)};P.prototype.addInput=function(a){O.isGoodCandidate(a)&&
this._inputs.push(a)};P.prototype.getOutput=function(){return this._output};P.prototype.run=function(){if(this._inputs.length){var a=this,d=new Date,b=v.isPlatformLittleEndian(),c=new O,d={date:d.toISOString(),createdWith:this._options.madeWith,description:this._options.description,userObject:this._options.userObject,pixblocksInfo:[]},f=[],g=d.pixblocksInfo;this._inputs.forEach(function(b,d){c.setInput(b);c.enableDataCompression(a._compress);c.run();var e=c.getOutput();e?(b={type:b.constructor.name,
description:"description"in b._metadata?b._metadata.description:null,byteLength:e.byteLength,checksum:lb(e)},g.push(b),f.push(e)):console.warn("The input of index "+d+" could not be encoded as a PixBlock.")});f.length||console.warn("No input was compatible for PixBlock encoding.");var d=v.objectToArrayBuffer(d),e=P.MAGIC_NUMBER(),l=new ArrayBuffer(e.length+5),n=new DataView(l);v.setString8InBuffer(e,l);n.setUint8(e.length,+b);n.setUint32(e.length+1,d.byteLength,b);b=[l,d].concat(f);this._output=v.mergeBuffers(b)}else console.warn("The encoder must be specified at least one input.")};
var ja=function(){this._verifyChecksum=!1;this.reset()};ja.prototype.setInput=function(a){a instanceof ArrayBuffer&&(this._input=a)};ja.prototype.getOutput=function(){return this._output};ja.prototype.reset=function(){this._output=this._input=null};ja.prototype.enableBlockVerification=function(a){this._verifyChecksum=a};ja.prototype.run=function(){var a=this._input;if(a){var d=this._verifyChecksum,b=a.byteLength,c=P.MAGIC_NUMBER();if(b<c.length+5)console.warn("This buffer does not match a PixBin file.");
else if(b=new DataView(a),v.getString8FromBuffer(a,c.length)!==c)console.warn("This file is not of PixBin type. (wrong magic number)");else{var c=c.length,f=b.getUint8(c);if(0!=f&&1!=f)console.warn("This file is not of PixBin type. (wrong endianess code)");else{for(var c=c+1,f=b.getUint32(c,f),c=c+4,b=v.ArrayBufferToObject(a.slice(c,c+f)),c=c+f,f=new da,g=0,e=[],l=0;l<b.pixblocksInfo.length;l++){var n=b.pixblocksInfo[l],h=a.slice(c,c+n.byteLength),c=c+n.byteLength;if(d&&lb(h)!==n.checksum)console.warn("Modality "+
(l+1)+"/"+b.pixblocksInfo.length+" ("+n.type+") could not comply to checksum validation.");else if(f.setInput(h),f.run(),n=f.getOutput())e.push(n),g++}this._output={meta:b,blocks:e}}}}else console.warn("Input cannot be null")};R.PixBlockEncoder=O;R.PixBlockDecoder=da;R.PixBinEncoder=P;R.PixBinDecoder=ja;Object.defineProperty(R,"__esModule",{value:!0})});

// Build date: 2017-0821T17:07:56

/*
* Author    Jonathan Lurie - http://me.jonahanlurie.fr
* License   MIT
* Link      https://github.com/jonathanlurie/pixbincodec
* Lab       MCIN - http://mcin.ca/ - Montreal Neurological Institute
*/
/*
 Chen, Yi-Cyuan 2014-2017
 @license MIT
*/
'use strict';(function(R,da){"object"===typeof exports&&"undefined"!==typeof module?da(exports):"function"===typeof define&&define.amd?define(["exports"],da):da(R.pixbincodec=R.pixbincodec||{})})(this,function(R){function da(a,c){return c={exports:{}},a(c,c.exports),c.exports}function ea(a){for(var c=a.length;0<=--c;)a[c]=0}function va(a,c,b,d,f){this.static_tree=a;this.extra_bits=c;this.extra_base=b;this.elems=d;this.max_length=f;this.has_stree=a&&a.length}function wa(a,c){this.dyn_tree=a;this.max_code=
0;this.stat_desc=c}function ia(a,c){a.pending_buf[a.pending++]=c&255;a.pending_buf[a.pending++]=c>>>8&255}function z(a,c,b){a.bi_valid>16-b?(a.bi_buf|=c<<a.bi_valid&65535,ia(a,a.bi_buf),a.bi_buf=c>>16-a.bi_valid,a.bi_valid+=b-16):(a.bi_buf|=c<<a.bi_valid&65535,a.bi_valid+=b)}function N(a,c,b){z(a,b[2*c],b[2*c+1])}function Ga(a,c){var b=0;do b|=a&1,a>>>=1,b<<=1;while(0<--c);return b>>>1}function Ha(a,c,b){var d=Array(16),f=0,g;for(g=1;15>=g;g++)d[g]=f=f+b[g-1]<<1;for(b=0;b<=c;b++)f=a[2*b+1],0!==f&&
(a[2*b]=Ga(d[f]++,f))}function Ia(a){var c;for(c=0;286>c;c++)a.dyn_ltree[2*c]=0;for(c=0;30>c;c++)a.dyn_dtree[2*c]=0;for(c=0;19>c;c++)a.bl_tree[2*c]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function Ja(a){8<a.bi_valid?ia(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function Ka(a,c,b,d){var f=2*c,g=2*b;return a[f]<a[g]||a[f]===a[g]&&d[c]<=d[b]}function xa(a,c,b){for(var d=a.heap[b],f=b<<1;f<=a.heap_len;){f<a.heap_len&&Ka(c,a.heap[f+
1],a.heap[f],a.depth)&&f++;if(Ka(c,d,a.heap[f],a.depth))break;a.heap[b]=a.heap[f];b=f;f<<=1}a.heap[b]=d}function La(a,c,b){var d,f,g=0,e,k;if(0!==a.last_lit){do d=a.pending_buf[a.d_buf+2*g]<<8|a.pending_buf[a.d_buf+2*g+1],f=a.pending_buf[a.l_buf+g],g++,0===d?N(a,f,c):(e=ja[f],N(a,e+256+1,c),k=ya[e],0!==k&&(f-=za[e],z(a,f,k)),d--,e=256>d?W[d]:W[256+(d>>>7)],N(a,e,b),k=ta[e],0!==k&&(d-=ua[e],z(a,d,k)));while(g<a.last_lit)}N(a,256,c)}function Aa(a,c){var b=c.dyn_tree,d=c.stat_desc.static_tree,f=c.stat_desc.has_stree,
g=c.stat_desc.elems,e,k=-1,n;a.heap_len=0;a.heap_max=573;for(e=0;e<g;e++)0!==b[2*e]?(a.heap[++a.heap_len]=k=e,a.depth[e]=0):b[2*e+1]=0;for(;2>a.heap_len;)n=a.heap[++a.heap_len]=2>k?++k:0,b[2*n]=1,a.depth[n]=0,a.opt_len--,f&&(a.static_len-=d[2*n+1]);c.max_code=k;for(e=a.heap_len>>1;1<=e;e--)xa(a,b,e);n=g;do e=a.heap[1],a.heap[1]=a.heap[a.heap_len--],xa(a,b,1),d=a.heap[1],a.heap[--a.heap_max]=e,a.heap[--a.heap_max]=d,b[2*n]=b[2*e]+b[2*d],a.depth[n]=(a.depth[e]>=a.depth[d]?a.depth[e]:a.depth[d])+1,b[2*
e+1]=b[2*d+1]=n,a.heap[1]=n++,xa(a,b,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];e=c.dyn_tree;n=c.max_code;var d=c.stat_desc.static_tree,f=c.stat_desc.has_stree,g=c.stat_desc.extra_bits,h=c.stat_desc.extra_base,m=c.stat_desc.max_length,y,t,l,p,v=0;for(t=0;15>=t;t++)a.bl_count[t]=0;e[2*a.heap[a.heap_max]+1]=0;for(c=a.heap_max+1;573>c;c++)y=a.heap[c],t=e[2*e[2*y+1]+1]+1,t>m&&(t=m,v++),e[2*y+1]=t,y>n||(a.bl_count[t]++,l=0,y>=h&&(l=g[y-h]),p=e[2*y],a.opt_len+=p*(t+l),f&&(a.static_len+=p*(d[2*
y+1]+l)));if(0!==v){do{for(t=m-1;0===a.bl_count[t];)t--;a.bl_count[t]--;a.bl_count[t+1]+=2;a.bl_count[m]--;v-=2}while(0<v);for(t=m;0!==t;t--)for(y=a.bl_count[t];0!==y;)d=a.heap[--c],d>n||(e[2*d+1]!==t&&(a.opt_len+=(t-e[2*d+1])*e[2*d],e[2*d+1]=t),y--)}Ha(b,k,a.bl_count)}function Ma(a,c,b){var d,f=-1,g,e=c[1],k=0,n=7,h=4;0===e&&(n=138,h=3);c[2*(b+1)+1]=65535;for(d=0;d<=b;d++)g=e,e=c[2*(d+1)+1],++k<n&&g===e||(k<h?a.bl_tree[2*g]+=k:0!==g?(g!==f&&a.bl_tree[2*g]++,a.bl_tree[32]++):10>=k?a.bl_tree[34]++:
a.bl_tree[36]++,k=0,f=g,0===e?(n=138,h=3):g===e?(n=6,h=3):(n=7,h=4))}function Na(a,c,b){var d,f=-1,g,e=c[1],k=0,n=7,h=4;0===e&&(n=138,h=3);for(d=0;d<=b;d++)if(g=e,e=c[2*(d+1)+1],!(++k<n&&g===e)){if(k<h){do N(a,g,a.bl_tree);while(0!==--k)}else 0!==g?(g!==f&&(N(a,g,a.bl_tree),k--),N(a,16,a.bl_tree),z(a,k-3,2)):10>=k?(N(a,17,a.bl_tree),z(a,k-3,3)):(N(a,18,a.bl_tree),z(a,k-11,7));k=0;f=g;0===e?(n=138,h=3):g===e?(n=6,h=3):(n=7,h=4)}}function lb(a){var c=4093624447,b;for(b=0;31>=b;b++,c>>>=1)if(c&1&&0!==
a.dyn_ltree[2*b])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(b=32;256>b;b++)if(0!==a.dyn_ltree[2*b])return 1;return 0}function Oa(a,c,b,d){z(a,0+(d?1:0),3);Ja(a);ia(a,b);ia(a,~b);v.arraySet(a.pending_buf,a.window,c,b,a.pending);a.pending+=b}function S(a,c){a.msg=fa[c];return c}function T(a){for(var c=a.length;0<=--c;)a[c]=0}function U(a){var c=a.state,b=c.pending;b>a.avail_out&&(b=a.avail_out);0!==b&&(v.arraySet(a.output,c.pending_buf,c.pending_out,b,a.next_out),
a.next_out+=b,c.pending_out+=b,a.total_out+=b,a.avail_out-=b,c.pending-=b,0===c.pending&&(c.pending_out=0))}function B(a,c){F._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,c);a.block_start=a.strstart;U(a.strm)}function r(a,c){a.pending_buf[a.pending++]=c}function ka(a,c){a.pending_buf[a.pending++]=c>>>8&255;a.pending_buf[a.pending++]=c&255}function Pa(a,c){var b=a.max_chain_length,d=a.strstart,f,g=a.prev_length,e=a.nice_match,k=a.strstart>a.w_size-262?a.strstart-(a.w_size-
262):0,n=a.window,h=a.w_mask,m=a.prev,y=a.strstart+258,t=n[d+g-1],l=n[d+g];a.prev_length>=a.good_match&&(b>>=2);e>a.lookahead&&(e=a.lookahead);do if(f=c,n[f+g]===l&&n[f+g-1]===t&&n[f]===n[d]&&n[++f]===n[d+1]){d+=2;for(f++;n[++d]===n[++f]&&n[++d]===n[++f]&&n[++d]===n[++f]&&n[++d]===n[++f]&&n[++d]===n[++f]&&n[++d]===n[++f]&&n[++d]===n[++f]&&n[++d]===n[++f]&&d<y;);f=258-(y-d);d=y-258;if(f>g){a.match_start=c;g=f;if(f>=e)break;t=n[d+g-1];l=n[d+g]}}while((c=m[c&h])>k&&0!==--b);return g<=a.lookahead?g:a.lookahead}
function X(a){var c=a.w_size,b,d,f,g;do{g=a.window_size-a.lookahead-a.strstart;if(a.strstart>=c+(c-262)){v.arraySet(a.window,a.window,c,c,0);a.match_start-=c;a.strstart-=c;a.block_start-=c;b=d=a.hash_size;do f=a.head[--b],a.head[b]=f>=c?f-c:0;while(--d);b=d=c;do f=a.prev[--b],a.prev[b]=f>=c?f-c:0;while(--d);g+=c}if(0===a.strm.avail_in)break;b=a.strm;d=a.window;f=a.strstart+a.lookahead;var e=b.avail_in;e>g&&(e=g);0===e?d=0:(b.avail_in-=e,v.arraySet(d,b.input,b.next_in,e,f),1===b.state.wrap?b.adler=
la(b.adler,d,e,f):2===b.state.wrap&&(b.adler=D(b.adler,d,e,f)),b.next_in+=e,b.total_in+=e,d=e);a.lookahead+=d;if(3<=a.lookahead+a.insert)for(g=a.strstart-a.insert,a.ins_h=a.window[g],a.ins_h=(a.ins_h<<a.hash_shift^a.window[g+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[g+3-1])&a.hash_mask,a.prev[g&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=g,g++,a.insert--,3>a.lookahead+a.insert););}while(262>a.lookahead&&0!==a.strm.avail_in)}function Ba(a,c){for(var b;;){if(262>a.lookahead){X(a);
if(262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}b=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,b=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);0!==b&&a.strstart-b<=a.w_size-262&&(a.match_length=Pa(a,b));if(3<=a.match_length)if(b=F._tr_tally(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^
a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else b=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(b&&(B(a,!1),0===a.strm.avail_out))return 1}a.insert=2>a.strstart?a.strstart:2;return 4===c?(B(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&
(B(a,!1),0===a.strm.avail_out)?1:2}function ga(a,c){for(var b,d;;){if(262>a.lookahead){X(a);if(262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}b=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,b=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;a.match_length=2;0!==b&&a.prev_length<a.max_lazy_match&&a.strstart-b<=a.w_size-262&&(a.match_length=Pa(a,b),5>=a.match_length&&(1===
a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&(a.match_length=2));if(3<=a.prev_length&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-3;b=F._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);a.match_available=0;a.match_length=2;a.strstart++;
if(b&&(B(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((b=F._tr_tally(a,0,a.window[a.strstart-1]))&&B(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(F._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=2>a.strstart?a.strstart:2;return 4===c?(B(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(B(a,!1),0===a.strm.avail_out)?1:2}function mb(a,c){for(var b,d,f,g=a.window;;){if(258>=
a.lookahead){X(a);if(258>=a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.match_length=0;if(3<=a.lookahead&&0<a.strstart&&(d=a.strstart-1,b=g[d],b===g[++d]&&b===g[++d]&&b===g[++d])){for(f=a.strstart+258;b===g[++d]&&b===g[++d]&&b===g[++d]&&b===g[++d]&&b===g[++d]&&b===g[++d]&&b===g[++d]&&b===g[++d]&&d<f;);a.match_length=258-(f-d);a.match_length>a.lookahead&&(a.match_length=a.lookahead)}3<=a.match_length?(b=F._tr_tally(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,
a.match_length=0):(b=F._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(b&&(B(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===c?(B(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(B(a,!1),0===a.strm.avail_out)?1:2}function nb(a,c){for(var b;;){if(0===a.lookahead&&(X(a),0===a.lookahead)){if(0===c)return 1;break}a.match_length=0;b=F._tr_tally(a,0,a.window[a.strstart]);a.lookahead--;a.strstart++;if(b&&(B(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===c?(B(a,!0),0===
a.strm.avail_out?3:4):a.last_lit&&(B(a,!1),0===a.strm.avail_out)?1:2}function O(a,c,b,d,f){this.good_length=a;this.max_lazy=c;this.nice_length=b;this.max_chain=d;this.func=f}function ob(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=
this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new v.Buf16(1146);this.dyn_dtree=new v.Buf16(122);this.bl_tree=new v.Buf16(78);T(this.dyn_ltree);T(this.dyn_dtree);T(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new v.Buf16(16);this.heap=new v.Buf16(573);
T(this.heap);this.heap_max=this.heap_len=0;this.depth=new v.Buf16(573);T(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function Qa(a){var c;if(!a||!a.state)return S(a,-2);a.total_in=a.total_out=0;a.data_type=2;c=a.state;c.pending=0;c.pending_out=0;0>c.wrap&&(c.wrap=-c.wrap);c.status=c.wrap?42:113;a.adler=2===c.wrap?0:1;c.last_flush=0;F._tr_init(c);return 0}function Ra(a){var c=Qa(a);0===c&&(a=a.state,
a.window_size=2*a.w_size,T(a.head),a.max_lazy_match=ha[a.level].max_lazy,a.good_match=ha[a.level].good_length,a.nice_match=ha[a.level].nice_length,a.max_chain_length=ha[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return c}function Sa(a,c,b,d,f,g){if(!a)return-2;var e=1;-1===c&&(c=6);0>d?(e=0,d=-d):15<d&&(e=2,d-=16);if(1>f||9<f||8!==b||8>d||15<d||0>c||9<c||0>g||4<g)return S(a,-2);8===d&&(d=9);var k=new ob;a.state=
k;k.strm=a;k.wrap=e;k.gzhead=null;k.w_bits=d;k.w_size=1<<k.w_bits;k.w_mask=k.w_size-1;k.hash_bits=f+7;k.hash_size=1<<k.hash_bits;k.hash_mask=k.hash_size-1;k.hash_shift=~~((k.hash_bits+3-1)/3);k.window=new v.Buf8(2*k.w_size);k.head=new v.Buf16(k.hash_size);k.prev=new v.Buf16(k.w_size);k.lit_bufsize=1<<f+6;k.pending_buf_size=4*k.lit_bufsize;k.pending_buf=new v.Buf8(k.pending_buf_size);k.d_buf=1*k.lit_bufsize;k.l_buf=3*k.lit_bufsize;k.level=c;k.strategy=g;k.method=b;return Ra(a)}function Ta(a,c){if(65537>
c&&(a.subarray&&Ua||!a.subarray&&Va))return String.fromCharCode.apply(null,v.shrinkBuf(a,c));for(var b="",d=0;d<c;d++)b+=String.fromCharCode(a[d]);return b}function Y(a){if(!(this instanceof Y))return new Y(a);a=this.options=v.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},a||{});a.raw&&0<a.windowBits?a.windowBits=-a.windowBits:a.gzip&&0<a.windowBits&&16>a.windowBits&&(a.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Wa;this.strm.avail_out=
0;var c=ma.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(0!==c)throw Error(fa[c]);a.header&&ma.deflateSetHeader(this.strm,a.header);if(a.dictionary){a="string"===typeof a.dictionary?Z.string2buf(a.dictionary):"[object ArrayBuffer]"===Xa.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary;c=ma.deflateSetDictionary(this.strm,a);if(0!==c)throw Error(fa[c]);this._dict_set=!0}}function Ca(a,c){c=new Y(c);c.push(a,!0);if(c.err)throw c.msg||fa[c.err];return c.result}
function Ya(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function pb(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new v.Buf16(320);this.work=new v.Buf16(288);this.distdyn=
this.lendyn=null;this.was=this.back=this.sane=0}function Za(a){var c;if(!a||!a.state)return-2;c=a.state;a.total_in=a.total_out=c.total=0;a.msg="";c.wrap&&(a.adler=c.wrap&1);c.mode=1;c.last=0;c.havedict=0;c.dmax=32768;c.head=null;c.hold=0;c.bits=0;c.lencode=c.lendyn=new v.Buf32(852);c.distcode=c.distdyn=new v.Buf32(592);c.sane=1;c.back=-1;return 0}function $a(a){var c;if(!a||!a.state)return-2;c=a.state;c.wsize=0;c.whave=0;c.wnext=0;return Za(a)}function ab(a,c){var b,d;if(!a||!a.state)return-2;d=a.state;
0>c?(b=0,c=-c):(b=(c>>4)+1,48>c&&(c&=15));if(c&&(8>c||15<c))return-2;null!==d.window&&d.wbits!==c&&(d.window=null);d.wrap=b;d.wbits=c;return $a(a)}function bb(a,c){var b;if(!a)return-2;b=new pb;a.state=b;b.window=null;c=ab(a,c);0!==c&&(a.state=null);return c}function cb(a,c,b,d){var f=a.state;null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new v.Buf8(f.wsize));d>=f.wsize?(v.arraySet(f.window,c,b-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(a=f.wsize-f.wnext,a>d&&(a=d),v.arraySet(f.window,
c,b-d,a,f.wnext),(d-=a)?(v.arraySet(f.window,c,b-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=a,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=a)));return 0}function aa(a){if(!(this instanceof aa))return new aa(a);var c=this.options=v.assign({chunkSize:16384,windowBits:0,to:""},a||{});c.raw&&0<=c.windowBits&&16>c.windowBits&&(c.windowBits=-c.windowBits,0===c.windowBits&&(c.windowBits=-15));!(0<=c.windowBits&&16>c.windowBits)||a&&a.windowBits||(c.windowBits+=32);15<c.windowBits&&48>c.windowBits&&
0===(c.windowBits&15)&&(c.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new Wa;this.strm.avail_out=0;a=na.inflateInit2(this.strm,c.windowBits);if(a!==w.Z_OK)throw Error(fa[a]);this.header=new qb;na.inflateGetHeader(this.strm,this.header)}function Da(a,c){c=new aa(c);c.push(a,!0);if(c.err)throw c.msg||fa[c.err];return c.result}var rb="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},v=da(function(a,c){a="undefined"!==
typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a};c.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var b={arraySet:function(a,b,c,d,n){if(b.subarray&&a.subarray)a.set(b.subarray(c,
c+d),n);else for(var f=0;f<d;f++)a[n+f]=b[c+f]},flattenChunks:function(a){var b,c,d,f,h;b=d=0;for(c=a.length;b<c;b++)d+=a[b].length;h=new Uint8Array(d);b=d=0;for(c=a.length;b<c;b++)f=a[b],h.set(f,d),d+=f.length;return h}},d={arraySet:function(a,b,c,d,n){for(var f=0;f<d;f++)a[n+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,b)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,d))};
c.setTyped(a)}),ya=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ta=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],sb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],db=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=Array(576);ea(Q);var oa=Array(60);ea(oa);var W=Array(512);ea(W);var ja=Array(256);ea(ja);var za=Array(29);ea(za);var ua=Array(30);ea(ua);var eb,fb,gb,hb=!1,F={_tr_init:function(a){if(!hb){var c,b,d,f=Array(16);for(d=b=0;28>d;d++)for(za[d]=b,c=0;c<1<<ya[d];c++)ja[b++]=
d;ja[b-1]=d;for(d=b=0;16>d;d++)for(ua[d]=b,c=0;c<1<<ta[d];c++)W[b++]=d;for(b>>=7;30>d;d++)for(ua[d]=b<<7,c=0;c<1<<ta[d]-7;c++)W[256+b++]=d;for(c=0;15>=c;c++)f[c]=0;for(c=0;143>=c;)Q[2*c+1]=8,c++,f[8]++;for(;255>=c;)Q[2*c+1]=9,c++,f[9]++;for(;279>=c;)Q[2*c+1]=7,c++,f[7]++;for(;287>=c;)Q[2*c+1]=8,c++,f[8]++;Ha(Q,287,f);for(c=0;30>c;c++)oa[2*c+1]=5,oa[2*c]=Ga(c,5);eb=new va(Q,ya,257,286,15);fb=new va(oa,ta,0,30,15);gb=new va([],sb,0,19,7);hb=!0}a.l_desc=new wa(a.dyn_ltree,eb);a.d_desc=new wa(a.dyn_dtree,
fb);a.bl_desc=new wa(a.bl_tree,gb);a.bi_buf=0;a.bi_valid=0;Ia(a)},_tr_stored_block:Oa,_tr_flush_block:function(a,c,b,d){var f,g,e=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=lb(a));Aa(a,a.l_desc);Aa(a,a.d_desc);Ma(a,a.dyn_ltree,a.l_desc.max_code);Ma(a,a.dyn_dtree,a.d_desc.max_code);Aa(a,a.bl_desc);for(e=18;3<=e&&0===a.bl_tree[2*db[e]+1];e--);a.opt_len+=3*(e+1)+14;f=a.opt_len+3+7>>>3;g=a.static_len+3+7>>>3;g<=f&&(f=g)}else f=g=b+5;if(b+4<=f&&-1!==c)Oa(a,c,b,d);else if(4===a.strategy||g===
f)z(a,2+(d?1:0),3),La(a,Q,oa);else{z(a,4+(d?1:0),3);c=a.l_desc.max_code+1;b=a.d_desc.max_code+1;e+=1;z(a,c-257,5);z(a,b-1,5);z(a,e-4,4);for(f=0;f<e;f++)z(a,a.bl_tree[2*db[f]+1],3);Na(a,a.dyn_ltree,c-1);Na(a,a.dyn_dtree,b-1);La(a,a.dyn_ltree,a.dyn_dtree)}Ia(a);d&&Ja(a)},_tr_tally:function(a,c,b){a.pending_buf[a.d_buf+2*a.last_lit]=c>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=c&255;a.pending_buf[a.l_buf+a.last_lit]=b&255;a.last_lit++;0===c?a.dyn_ltree[2*b]++:(a.matches++,c--,a.dyn_ltree[2*(ja[b]+
256+1)]++,a.dyn_dtree[2*(256>c?W[c]:W[256+(c>>>7)])]++);return a.last_lit===a.lit_bufsize-1},_tr_align:function(a){z(a,2,3);N(a,256,Q);16===a.bi_valid?(ia(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}},la=function(a,c,b,d){var f=a&65535|0;a=a>>>16&65535|0;for(var g;0!==b;){g=2E3<b?2E3:b;b-=g;do f=f+c[d++]|0,a=a+f|0;while(--g);f%=65521;a%=65521}return f|a<<16|0},tb=function(){for(var a,c=[],b=0;256>b;b++){a=b;for(var d=0;8>
d;d++)a=a&1?3988292384^a>>>1:a>>>1;c[b]=a}return c}(),D=function(a,c,b,d){b=d+b;for(a^=-1;d<b;d++)a=a>>>8^tb[(a^c[d])&255];return a^-1},fa={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ha;ha=[new O(0,0,0,0,function(a,c){var b=65535;for(b>a.pending_buf_size-5&&(b=a.pending_buf_size-5);;){if(1>=a.lookahead){X(a);if(0===a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.strstart+=
a.lookahead;a.lookahead=0;var d=a.block_start+b;if(0===a.strstart||a.strstart>=d)if(a.lookahead=a.strstart-d,a.strstart=d,B(a,!1),0===a.strm.avail_out)return 1;if(a.strstart-a.block_start>=a.w_size-262&&(B(a,!1),0===a.strm.avail_out))return 1}a.insert=0;if(4===c)return B(a,!0),0===a.strm.avail_out?3:4;a.strstart>a.block_start&&B(a,!1);return 1}),new O(4,4,8,4,Ba),new O(4,5,16,8,Ba),new O(4,6,32,32,Ba),new O(4,4,16,16,ga),new O(8,16,32,32,ga),new O(8,16,128,128,ga),new O(8,32,128,256,ga),new O(32,
128,258,1024,ga),new O(32,258,258,4096,ga)];var ma={deflateInit:function(a,c){return Sa(a,c,8,15,8,0)},deflateInit2:Sa,deflateReset:Ra,deflateResetKeep:Qa,deflateSetHeader:function(a,c){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=c;return 0},deflate:function(a,c){var b,d,f,g;if(!a||!a.state||5<c||0>c)return a?S(a,-2):-2;d=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===d.status&&4!==c)return S(a,0===a.avail_out?-5:-2);d.strm=a;b=d.last_flush;d.last_flush=c;42===d.status&&(2===
d.wrap?(a.adler=0,r(d,31),r(d,139),r(d,8),d.gzhead?(r(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),r(d,d.gzhead.time&255),r(d,d.gzhead.time>>8&255),r(d,d.gzhead.time>>16&255),r(d,d.gzhead.time>>24&255),r(d,9===d.level?2:2<=d.strategy||2>d.level?4:0),r(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(r(d,d.gzhead.extra.length&255),r(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=D(a.adler,d.pending_buf,d.pending,0)),
d.gzindex=0,d.status=69):(r(d,0),r(d,0),r(d,0),r(d,0),r(d,0),r(d,9===d.level?2:2<=d.strategy||2>d.level?4:0),r(d,3),d.status=113)):(f=8+(d.w_bits-8<<4)<<8,f|=(2<=d.strategy||2>d.level?0:6>d.level?1:6===d.level?2:3)<<6,0!==d.strstart&&(f|=32),d.status=113,ka(d,f+(31-f%31)),0!==d.strstart&&(ka(d,a.adler>>>16),ka(d,a.adler&65535)),a.adler=1));if(69===d.status)if(d.gzhead.extra){for(f=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&(d.pending!==d.pending_buf_size||(d.gzhead.hcrc&&d.pending>f&&(a.adler=
D(a.adler,d.pending_buf,d.pending-f,f)),U(a),f=d.pending,d.pending!==d.pending_buf_size));)r(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>f&&(a.adler=D(a.adler,d.pending_buf,d.pending-f,f));d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=73)}else d.status=73;if(73===d.status)if(d.gzhead.name){f=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>f&&(a.adler=D(a.adler,d.pending_buf,d.pending-f,f)),U(a),f=d.pending,d.pending===d.pending_buf_size)){g=
1;break}g=d.gzindex<d.gzhead.name.length?d.gzhead.name.charCodeAt(d.gzindex++)&255:0;r(d,g)}while(0!==g);d.gzhead.hcrc&&d.pending>f&&(a.adler=D(a.adler,d.pending_buf,d.pending-f,f));0===g&&(d.gzindex=0,d.status=91)}else d.status=91;if(91===d.status)if(d.gzhead.comment){f=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>f&&(a.adler=D(a.adler,d.pending_buf,d.pending-f,f)),U(a),f=d.pending,d.pending===d.pending_buf_size)){g=1;break}g=d.gzindex<d.gzhead.comment.length?d.gzhead.comment.charCodeAt(d.gzindex++)&
255:0;r(d,g)}while(0!==g);d.gzhead.hcrc&&d.pending>f&&(a.adler=D(a.adler,d.pending_buf,d.pending-f,f));0===g&&(d.status=103)}else d.status=103;103===d.status&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&U(a),d.pending+2<=d.pending_buf_size&&(r(d,a.adler&255),r(d,a.adler>>8&255),a.adler=0,d.status=113)):d.status=113);if(0!==d.pending){if(U(a),0===a.avail_out)return d.last_flush=-1,0}else if(0===a.avail_in&&(c<<1)-(4<c?9:0)<=(b<<1)-(4<b?9:0)&&4!==c)return S(a,-5);if(666===d.status&&0!==a.avail_in)return S(a,
-5);if(0!==a.avail_in||0!==d.lookahead||0!==c&&666!==d.status){b=2===d.strategy?nb(d,c):3===d.strategy?mb(d,c):ha[d.level].func(d,c);if(3===b||4===b)d.status=666;if(1===b||3===b)return 0===a.avail_out&&(d.last_flush=-1),0;if(2===b&&(1===c?F._tr_align(d):5!==c&&(F._tr_stored_block(d,0,0,!1),3===c&&(T(d.head),0===d.lookahead&&(d.strstart=0,d.block_start=0,d.insert=0))),U(a),0===a.avail_out))return d.last_flush=-1,0}if(4!==c)return 0;if(0>=d.wrap)return 1;2===d.wrap?(r(d,a.adler&255),r(d,a.adler>>8&
255),r(d,a.adler>>16&255),r(d,a.adler>>24&255),r(d,a.total_in&255),r(d,a.total_in>>8&255),r(d,a.total_in>>16&255),r(d,a.total_in>>24&255)):(ka(d,a.adler>>>16),ka(d,a.adler&65535));U(a);0<d.wrap&&(d.wrap=-d.wrap);return 0!==d.pending?0:1},deflateEnd:function(a){var c;if(!a||!a.state)return-2;c=a.state.status;if(42!==c&&69!==c&&73!==c&&91!==c&&103!==c&&113!==c&&666!==c)return S(a,-2);a.state=null;return 113===c?S(a,-3):0},deflateSetDictionary:function(a,c){var b=c.length,d,f,g,e,k;if(!a||!a.state)return-2;
d=a.state;f=d.wrap;if(2===f||1===f&&42!==d.status||d.lookahead)return-2;1===f&&(a.adler=la(a.adler,c,b,0));d.wrap=0;b>=d.w_size&&(0===f&&(T(d.head),d.strstart=0,d.block_start=0,d.insert=0),g=new v.Buf8(d.w_size),v.arraySet(g,c,b-d.w_size,d.w_size,0),c=g,b=d.w_size);g=a.avail_in;e=a.next_in;k=a.input;a.avail_in=b;a.next_in=0;a.input=c;for(X(d);3<=d.lookahead;){c=d.strstart;b=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[c+3-1])&d.hash_mask,d.prev[c&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=
c,c++;while(--b);d.strstart=c;d.lookahead=2;X(d)}d.strstart+=d.lookahead;d.block_start=d.strstart;d.insert=d.lookahead;d.lookahead=0;d.match_length=d.prev_length=2;d.match_available=0;a.next_in=e;a.input=k;a.avail_in=g;d.wrap=f;return 0},deflateInfo:"pako deflate (from Nodeca project)"},Va=!0,Ua=!0;try{String.fromCharCode.apply(null,[0])}catch(a){Va=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){Ua=!1}for(var pa=new v.Buf8(256),V=0;256>V;V++)pa[V]=252<=V?6:248<=V?5:240<=V?4:224<=
V?3:192<=V?2:1;pa[254]=pa[254]=1;var Z={string2buf:function(a){var c,b,d,f,g,e=a.length,k=0;for(f=0;f<e;f++)b=a.charCodeAt(f),55296===(b&64512)&&f+1<e&&(d=a.charCodeAt(f+1),56320===(d&64512)&&(b=65536+(b-55296<<10)+(d-56320),f++)),k+=128>b?1:2048>b?2:65536>b?3:4;c=new v.Buf8(k);for(f=g=0;g<k;f++)b=a.charCodeAt(f),55296===(b&64512)&&f+1<e&&(d=a.charCodeAt(f+1),56320===(d&64512)&&(b=65536+(b-55296<<10)+(d-56320),f++)),128>b?c[g++]=b:(2048>b?c[g++]=192|b>>>6:(65536>b?c[g++]=224|b>>>12:(c[g++]=240|b>>>
18,c[g++]=128|b>>>12&63),c[g++]=128|b>>>6&63),c[g++]=128|b&63);return c},buf2binstring:function(a){return Ta(a,a.length)},binstring2buf:function(a){for(var c=new v.Buf8(a.length),b=0,d=c.length;b<d;b++)c[b]=a.charCodeAt(b);return c},buf2string:function(a,c){var b,d,f,g=c||a.length,e=Array(2*g);for(c=b=0;c<g;)if(d=a[c++],128>d)e[b++]=d;else if(f=pa[d],4<f)e[b++]=65533,c+=f-1;else{for(d&=2===f?31:3===f?15:7;1<f&&c<g;)d=d<<6|a[c++]&63,f--;1<f?e[b++]=65533:65536>d?e[b++]=d:(d-=65536,e[b++]=55296|d>>10&
1023,e[b++]=56320|d&1023)}return Ta(e,b)},utf8border:function(a,c){var b;c=c||a.length;c>a.length&&(c=a.length);for(b=c-1;0<=b&&128===(a[b]&192);)b--;return 0>b||0===b?c:b+pa[a[b]]>c?b:c}},Wa=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0},Xa=Object.prototype.toString;Y.prototype.push=function(a,c){var b=this.strm,d=this.options.chunkSize;if(this.ended)return!1;
c=c===~~c?c:!0===c?4:0;"string"===typeof a?b.input=Z.string2buf(a):"[object ArrayBuffer]"===Xa.call(a)?b.input=new Uint8Array(a):b.input=a;b.next_in=0;b.avail_in=b.input.length;do{0===b.avail_out&&(b.output=new v.Buf8(d),b.next_out=0,b.avail_out=d);a=ma.deflate(b,c);if(1!==a&&0!==a)return this.onEnd(a),this.ended=!0,!1;if(0===b.avail_out||0===b.avail_in&&(4===c||2===c))if("string"===this.options.to)this.onData(Z.buf2binstring(v.shrinkBuf(b.output,b.next_out)));else this.onData(v.shrinkBuf(b.output,
b.next_out))}while((0<b.avail_in||0===b.avail_out)&&1!==a);if(4===c)return a=ma.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,0===a;2===c&&(this.onEnd(0),b.avail_out=0);return!0};Y.prototype.onData=function(a){this.chunks.push(a)};Y.prototype.onEnd=function(a){0===a&&(this.result="string"===this.options.to?this.chunks.join(""):v.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var ub={Deflate:Y,deflate:Ca,deflateRaw:function(a,c){c=c||{};c.raw=!0;return Ca(a,c)},gzip:function(a,
c){c=c||{};c.gzip=!0;return Ca(a,c)}},vb=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],wb=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],xb=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],yb=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],ra=function(a,c,b,d,f,g,e,k){var n=k.bits,h,m,y,
t,l,p,q,u,G,M,I,C,ba,A=0,qa,r=new v.Buf16(16);l=new v.Buf16(16);var w,D=0,B,x,z;for(h=0;15>=h;h++)r[h]=0;for(m=0;m<d;m++)r[c[b+m]]++;t=n;for(y=15;1<=y&&0===r[y];y--);t>y&&(t=y);if(0===y)return f[g++]=20971520,f[g++]=20971520,k.bits=1,0;for(n=1;n<y&&0===r[n];n++);t<n&&(t=n);for(h=p=1;15>=h;h++)if(p<<=1,p-=r[h],0>p)return-1;if(0<p&&(0===a||1!==y))return-1;l[1]=0;for(h=1;15>h;h++)l[h+1]=l[h]+r[h];for(m=0;m<d;m++)0!==c[b+m]&&(e[l[c[b+m]]++]=m);0===a?(ba=w=e,qa=19):1===a?(ba=vb,A-=257,w=wb,D-=257,qa=256):
(ba=xb,w=yb,qa=-1);m=u=0;h=n;C=g;d=t;l=0;M=-1;q=1<<t;I=q-1;if(1===a&&852<q||2===a&&592<q)return 1;for(;;){B=h-l;e[m]<qa?(x=0,z=e[m]):e[m]>qa?(x=w[D+e[m]],z=ba[A+e[m]]):(x=96,z=0);p=1<<h-l;n=G=1<<d;do G-=p,f[C+(u>>l)+G]=B<<24|x<<16|z|0;while(0!==G);for(p=1<<h-1;u&p;)p>>=1;0!==p?(u&=p-1,u+=p):u=0;m++;if(0===--r[h]){if(h===y)break;h=c[b+e[m]]}if(h>t&&(u&I)!==M){0===l&&(l=t);C+=n;d=h-l;for(p=1<<d;d+l<y;){p-=r[d+l];if(0>=p)break;d++;p<<=1}q+=1<<d;if(1===a&&852<q||2===a&&592<q)return 1;M=u&I;f[M]=t<<24|
d<<16|C-g|0}}0!==u&&(f[C+u]=h-l<<24|4194304);k.bits=t;return 0},ib=!0,Ea,Fa,na={inflateReset:$a,inflateReset2:ab,inflateResetKeep:Za,inflateInit:function(a){return bb(a,15)},inflateInit2:bb,inflate:function(a,c){var b,d,f,g,e,k,n,h,m,y,t,l,p,q,u,G,M,I,C=new v.Buf8(4),ba=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;b=a.state;12===b.mode&&(b.mode=13);e=a.next_out;f=a.output;n=a.avail_out;g=a.next_in;d=a.input;k=a.avail_in;h=b.hold;m=
b.bits;y=k;t=n;I=0;a:for(;;)switch(b.mode){case 1:if(0===b.wrap){b.mode=13;break}for(;16>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}if(b.wrap&2&&35615===h){b.check=0;C[0]=h&255;C[1]=h>>>8&255;b.check=D(b.check,C,2,0);m=h=0;b.mode=2;break}b.flags=0;b.head&&(b.head.done=!1);if(!(b.wrap&1)||(((h&255)<<8)+(h>>8))%31){a.msg="incorrect header check";b.mode=30;break}if(8!==(h&15)){a.msg="unknown compression method";b.mode=30;break}h>>>=4;m-=4;p=(h&15)+8;if(0===b.wbits)b.wbits=p;else if(p>b.wbits){a.msg=
"invalid window size";b.mode=30;break}b.dmax=1<<p;a.adler=b.check=1;b.mode=h&512?10:12;m=h=0;break;case 2:for(;16>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}b.flags=h;if(8!==(b.flags&255)){a.msg="unknown compression method";b.mode=30;break}if(b.flags&57344){a.msg="unknown header flags set";b.mode=30;break}b.head&&(b.head.text=h>>8&1);b.flags&512&&(C[0]=h&255,C[1]=h>>>8&255,b.check=D(b.check,C,2,0));m=h=0;b.mode=3;case 3:for(;32>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}b.head&&(b.head.time=h);b.flags&
512&&(C[0]=h&255,C[1]=h>>>8&255,C[2]=h>>>16&255,C[3]=h>>>24&255,b.check=D(b.check,C,4,0));m=h=0;b.mode=4;case 4:for(;16>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}b.head&&(b.head.xflags=h&255,b.head.os=h>>8);b.flags&512&&(C[0]=h&255,C[1]=h>>>8&255,b.check=D(b.check,C,2,0));m=h=0;b.mode=5;case 5:if(b.flags&1024){for(;16>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}b.length=h;b.head&&(b.head.extra_len=h);b.flags&512&&(C[0]=h&255,C[1]=h>>>8&255,b.check=D(b.check,C,2,0));m=h=0}else b.head&&(b.head.extra=
null);b.mode=6;case 6:if(b.flags&1024&&(l=b.length,l>k&&(l=k),l&&(b.head&&(p=b.head.extra_len-b.length,b.head.extra||(b.head.extra=Array(b.head.extra_len)),v.arraySet(b.head.extra,d,g,l,p)),b.flags&512&&(b.check=D(b.check,d,l,g)),k-=l,g+=l,b.length-=l),b.length))break a;b.length=0;b.mode=7;case 7:if(b.flags&2048){if(0===k)break a;l=0;do p=d[g+l++],b.head&&p&&65536>b.length&&(b.head.name+=String.fromCharCode(p));while(p&&l<k);b.flags&512&&(b.check=D(b.check,d,l,g));k-=l;g+=l;if(p)break a}else b.head&&
(b.head.name=null);b.length=0;b.mode=8;case 8:if(b.flags&4096){if(0===k)break a;l=0;do p=d[g+l++],b.head&&p&&65536>b.length&&(b.head.comment+=String.fromCharCode(p));while(p&&l<k);b.flags&512&&(b.check=D(b.check,d,l,g));k-=l;g+=l;if(p)break a}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(b.flags&512){for(;16>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}if(h!==(b.check&65535)){a.msg="header crc mismatch";b.mode=30;break}m=h=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0);a.adler=b.check=
0;b.mode=12;break;case 10:for(;32>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}a.adler=b.check=Ya(h);m=h=0;b.mode=11;case 11:if(0===b.havedict)return a.next_out=e,a.avail_out=n,a.next_in=g,a.avail_in=k,b.hold=h,b.bits=m,2;a.adler=b.check=1;b.mode=12;case 12:if(5===c||6===c)break a;case 13:if(b.last){h>>>=m&7;m-=m&7;b.mode=27;break}for(;3>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}b.last=h&1;h>>>=1;--m;switch(h&3){case 0:b.mode=14;break;case 1:p=b;if(ib){Ea=new v.Buf32(512);Fa=new v.Buf32(32);for(l=
0;144>l;)p.lens[l++]=8;for(;256>l;)p.lens[l++]=9;for(;280>l;)p.lens[l++]=7;for(;288>l;)p.lens[l++]=8;ra(1,p.lens,0,288,Ea,0,p.work,{bits:9});for(l=0;32>l;)p.lens[l++]=5;ra(2,p.lens,0,32,Fa,0,p.work,{bits:5});ib=!1}p.lencode=Ea;p.lenbits=9;p.distcode=Fa;p.distbits=5;b.mode=20;if(6===c){h>>>=2;m-=2;break a}break;case 2:b.mode=17;break;case 3:a.msg="invalid block type",b.mode=30}h>>>=2;m-=2;break;case 14:h>>>=m&7;for(m-=m&7;32>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}if((h&65535)!==(h>>>16^65535)){a.msg=
"invalid stored block lengths";b.mode=30;break}b.length=h&65535;m=h=0;b.mode=15;if(6===c)break a;case 15:b.mode=16;case 16:if(l=b.length){l>k&&(l=k);l>n&&(l=n);if(0===l)break a;v.arraySet(f,d,g,l,e);k-=l;g+=l;n-=l;e+=l;b.length-=l;break}b.mode=12;break;case 17:for(;14>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}b.nlen=(h&31)+257;h>>>=5;m-=5;b.ndist=(h&31)+1;h>>>=5;m-=5;b.ncode=(h&15)+4;h>>>=4;m-=4;if(286<b.nlen||30<b.ndist){a.msg="too many length or distance symbols";b.mode=30;break}b.have=0;b.mode=
18;case 18:for(;b.have<b.ncode;){for(;3>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}b.lens[ba[b.have++]]=h&7;h>>>=3;m-=3}for(;19>b.have;)b.lens[ba[b.have++]]=0;b.lencode=b.lendyn;b.lenbits=7;l={bits:b.lenbits};I=ra(0,b.lens,0,19,b.lencode,0,b.work,l);b.lenbits=l.bits;if(I){a.msg="invalid code lengths set";b.mode=30;break}b.have=0;b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;;){u=b.lencode[h&(1<<b.lenbits)-1];l=u>>>24;u&=65535;if(l<=m)break;if(0===k)break a;k--;h+=d[g++]<<m;m+=8}if(16>u)h>>>=
l,m-=l,b.lens[b.have++]=u;else{if(16===u){for(p=l+2;m<p;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}h>>>=l;m-=l;if(0===b.have){a.msg="invalid bit length repeat";b.mode=30;break}p=b.lens[b.have-1];l=3+(h&3);h>>>=2;m-=2}else if(17===u){for(p=l+3;m<p;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}h>>>=l;m-=l;p=0;l=3+(h&7);h>>>=3;m-=3}else{for(p=l+7;m<p;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}h>>>=l;m-=l;p=0;l=11+(h&127);h>>>=7;m-=7}if(b.have+l>b.nlen+b.ndist){a.msg="invalid bit length repeat";b.mode=30;break}for(;l--;)b.lens[b.have++]=
p}}if(30===b.mode)break;if(0===b.lens[256]){a.msg="invalid code -- missing end-of-block";b.mode=30;break}b.lenbits=9;l={bits:b.lenbits};I=ra(1,b.lens,0,b.nlen,b.lencode,0,b.work,l);b.lenbits=l.bits;if(I){a.msg="invalid literal/lengths set";b.mode=30;break}b.distbits=6;b.distcode=b.distdyn;l={bits:b.distbits};I=ra(2,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,l);b.distbits=l.bits;if(I){a.msg="invalid distances set";b.mode=30;break}b.mode=20;if(6===c)break a;case 20:b.mode=21;case 21:if(6<=k&&258<=n){a.next_out=
e;a.avail_out=n;a.next_in=g;a.avail_in=k;b.hold=h;b.bits=m;var A,r,w,B,z,H,x,F,K,E,J=a;E=J.state;K=J.next_in;f=J.input;F=K+(J.avail_in-5);x=J.next_out;d=J.output;H=x-(t-J.avail_out);z=x+(J.avail_out-257);B=E.dmax;u=E.wsize;M=E.whave;G=E.wnext;q=E.window;p=E.hold;l=E.bits;m=E.lencode;h=E.distcode;n=(1<<E.lenbits)-1;k=(1<<E.distbits)-1;b:do c:for(15>l&&(p+=f[K++]<<l,l+=8,p+=f[K++]<<l,l+=8),A=m[p&n];;){e=A>>>24;p>>>=e;l-=e;e=A>>>16&255;if(0===e)d[x++]=A&65535;else if(e&16){g=A&65535;if(e&=15)l<e&&(p+=
f[K++]<<l,l+=8),g+=p&(1<<e)-1,p>>>=e,l-=e;15>l&&(p+=f[K++]<<l,l+=8,p+=f[K++]<<l,l+=8);A=h[p&k];d:for(;;){e=A>>>24;p>>>=e;l-=e;e=A>>>16&255;if(e&16){w=A&65535;e&=15;l<e&&(p+=f[K++]<<l,l+=8,l<e&&(p+=f[K++]<<l,l+=8));w+=p&(1<<e)-1;if(w>B){J.msg="invalid distance too far back";E.mode=30;break b}p>>>=e;l-=e;e=x-H;if(w>e){e=w-e;if(e>M&&E.sane){J.msg="invalid distance too far back";E.mode=30;break b}r=0;A=q;if(0===G){if(r+=u-e,e<g){g-=e;do d[x++]=q[r++];while(--e);r=x-w;A=d}}else if(G<e){if(r+=u+G-e,e-=
G,e<g){g-=e;do d[x++]=q[r++];while(--e);r=0;if(G<g){e=G;g-=e;do d[x++]=q[r++];while(--e);r=x-w;A=d}}}else if(r+=G-e,e<g){g-=e;do d[x++]=q[r++];while(--e);r=x-w;A=d}for(;2<g;)d[x++]=A[r++],d[x++]=A[r++],d[x++]=A[r++],g-=3;g&&(d[x++]=A[r++],1<g&&(d[x++]=A[r++]))}else{r=x-w;do d[x++]=d[r++],d[x++]=d[r++],d[x++]=d[r++],g-=3;while(2<g);g&&(d[x++]=d[r++],1<g&&(d[x++]=d[r++]))}}else if(0===(e&64)){A=h[(A&65535)+(p&(1<<e)-1)];continue d}else{J.msg="invalid distance code";E.mode=30;break b}break}}else if(0===
(e&64)){A=m[(A&65535)+(p&(1<<e)-1)];continue c}else{e&32?E.mode=12:(J.msg="invalid literal/length code",E.mode=30);break b}break}while(K<F&&x<z);g=l>>3;K-=g;l-=g<<3;J.next_in=K;J.next_out=x;J.avail_in=K<F?5+(F-K):5-(K-F);J.avail_out=x<z?257+(z-x):257-(x-z);E.hold=p&(1<<l)-1;E.bits=l;e=a.next_out;f=a.output;n=a.avail_out;g=a.next_in;d=a.input;k=a.avail_in;h=b.hold;m=b.bits;12===b.mode&&(b.back=-1);break}for(b.back=0;;){u=b.lencode[h&(1<<b.lenbits)-1];l=u>>>24;p=u>>>16&255;u&=65535;if(l<=m)break;if(0===
k)break a;k--;h+=d[g++]<<m;m+=8}if(p&&0===(p&240)){q=l;G=p;for(M=u;;){u=b.lencode[M+((h&(1<<q+G)-1)>>q)];l=u>>>24;p=u>>>16&255;u&=65535;if(q+l<=m)break;if(0===k)break a;k--;h+=d[g++]<<m;m+=8}h>>>=q;m-=q;b.back+=q}h>>>=l;m-=l;b.back+=l;b.length=u;if(0===p){b.mode=26;break}if(p&32){b.back=-1;b.mode=12;break}if(p&64){a.msg="invalid literal/length code";b.mode=30;break}b.extra=p&15;b.mode=22;case 22:if(b.extra){for(p=b.extra;m<p;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}b.length+=h&(1<<b.extra)-1;h>>>=
b.extra;m-=b.extra;b.back+=b.extra}b.was=b.length;b.mode=23;case 23:for(;;){u=b.distcode[h&(1<<b.distbits)-1];l=u>>>24;p=u>>>16&255;u&=65535;if(l<=m)break;if(0===k)break a;k--;h+=d[g++]<<m;m+=8}if(0===(p&240)){q=l;G=p;for(M=u;;){u=b.distcode[M+((h&(1<<q+G)-1)>>q)];l=u>>>24;p=u>>>16&255;u&=65535;if(q+l<=m)break;if(0===k)break a;k--;h+=d[g++]<<m;m+=8}h>>>=q;m-=q;b.back+=q}h>>>=l;m-=l;b.back+=l;if(p&64){a.msg="invalid distance code";b.mode=30;break}b.offset=u;b.extra=p&15;b.mode=24;case 24:if(b.extra){for(p=
b.extra;m<p;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}b.offset+=h&(1<<b.extra)-1;h>>>=b.extra;m-=b.extra;b.back+=b.extra}if(b.offset>b.dmax){a.msg="invalid distance too far back";b.mode=30;break}b.mode=25;case 25:if(0===n)break a;l=t-n;if(b.offset>l){l=b.offset-l;if(l>b.whave&&b.sane){a.msg="invalid distance too far back";b.mode=30;break}l>b.wnext?(l-=b.wnext,p=b.wsize-l):p=b.wnext-l;l>b.length&&(l=b.length);q=b.window}else q=f,p=e-b.offset,l=b.length;l>n&&(l=n);n-=l;b.length-=l;do f[e++]=q[p++];while(--l);
0===b.length&&(b.mode=21);break;case 26:if(0===n)break a;f[e++]=b.length;n--;b.mode=21;break;case 27:if(b.wrap){for(;32>m;){if(0===k)break a;k--;h|=d[g++]<<m;m+=8}t-=n;a.total_out+=t;b.total+=t;t&&(a.adler=b.check=b.flags?D(b.check,f,t,e-t):la(b.check,f,t,e-t));t=n;if((b.flags?h:Ya(h))!==b.check){a.msg="incorrect data check";b.mode=30;break}m=h=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;32>m;){if(0===k)break a;k--;h+=d[g++]<<m;m+=8}if(h!==(b.total&4294967295)){a.msg="incorrect length check";b.mode=
30;break}m=h=0}b.mode=29;case 29:I=1;break a;case 30:I=-3;break a;case 31:return-4;default:return-2}a.next_out=e;a.avail_out=n;a.next_in=g;a.avail_in=k;b.hold=h;b.bits=m;if((b.wsize||t!==a.avail_out&&30>b.mode&&(27>b.mode||4!==c))&&cb(a,a.output,a.next_out,t-a.avail_out))return b.mode=31,-4;y-=a.avail_in;t-=a.avail_out;a.total_in+=y;a.total_out+=t;b.total+=t;b.wrap&&t&&(a.adler=b.check=b.flags?D(b.check,f,t,a.next_out-t):la(b.check,f,t,a.next_out-t));a.data_type=b.bits+(b.last?64:0)+(12===b.mode?
128:0)+(20===b.mode||15===b.mode?256:0);(0===y&&0===t||4===c)&&0===I&&(I=-5);return I},inflateEnd:function(a){if(!a||!a.state)return-2;var c=a.state;c.window&&(c.window=null);a.state=null;return 0},inflateGetHeader:function(a,c){if(!a||!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=c;c.done=!1;return 0},inflateSetDictionary:function(a,c){var b=c.length,d,f;if(!a||!a.state)return-2;d=a.state;if(0!==d.wrap&&11!==d.mode)return-2;if(11===d.mode&&(f=la(1,c,b,0),f!==d.check))return-3;if(cb(a,
c,b,b))return d.mode=31,-4;d.havedict=1;return 0},inflateInfo:"pako inflate (from Nodeca project)"},w={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},qb=function(){this.os=
this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1},jb=Object.prototype.toString;aa.prototype.push=function(a,c){var b=this.strm,d=this.options.chunkSize,f=this.options.dictionary,g,e,k,n=!1;if(this.ended)return!1;c=c===~~c?c:!0===c?w.Z_FINISH:w.Z_NO_FLUSH;"string"===typeof a?b.input=Z.binstring2buf(a):"[object ArrayBuffer]"===jb.call(a)?b.input=new Uint8Array(a):b.input=a;b.next_in=0;b.avail_in=b.input.length;do{0===b.avail_out&&
(b.output=new v.Buf8(d),b.next_out=0,b.avail_out=d);a=na.inflate(b,w.Z_NO_FLUSH);a===w.Z_NEED_DICT&&f&&(a="string"===typeof f?Z.string2buf(f):"[object ArrayBuffer]"===jb.call(f)?new Uint8Array(f):f,a=na.inflateSetDictionary(this.strm,a));a===w.Z_BUF_ERROR&&!0===n&&(a=w.Z_OK,n=!1);if(a!==w.Z_STREAM_END&&a!==w.Z_OK)return this.onEnd(a),this.ended=!0,!1;if(b.next_out&&(0===b.avail_out||a===w.Z_STREAM_END||0===b.avail_in&&(c===w.Z_FINISH||c===w.Z_SYNC_FLUSH)))if("string"===this.options.to)g=Z.utf8border(b.output,
b.next_out),e=b.next_out-g,k=Z.buf2string(b.output,g),b.next_out=e,b.avail_out=d-e,e&&v.arraySet(b.output,b.output,g,e,0),this.onData(k);else this.onData(v.shrinkBuf(b.output,b.next_out));0===b.avail_in&&0===b.avail_out&&(n=!0)}while((0<b.avail_in||0===b.avail_out)&&a!==w.Z_STREAM_END);a===w.Z_STREAM_END&&(c=w.Z_FINISH);if(c===w.Z_FINISH)return a=na.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===w.Z_OK;c===w.Z_SYNC_FLUSH&&(this.onEnd(w.Z_OK),b.avail_out=0);return!0};aa.prototype.onData=function(a){this.chunks.push(a)};
aa.prototype.onEnd=function(a){a===w.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):v.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};var zb=v.assign,sa={};zb(sa,ub,{Inflate:aa,inflate:Da,inflateRaw:function(a,c){c=c||{};c.raw=!0;return Da(a,c)},ungzip:Da},w);var q=function(){};q.isPlatformLittleEndian=function(){var a=new Uint32Array([305419896]);return 18!=(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))[0]};q.arrayBufferToString16=function(a){return String.fromCharCode.apply(null,
new Uint16Array(a))};q.string16ToArrayBuffer=function(a){for(var c=new ArrayBuffer(2*a.length),b=new Uint16Array(c),d=0;d<a.length;d++)b[d]=a.charCodeAt(d);return c};q.arrayBufferToString8=function(a){return String.fromCharCode.apply(null,new Uint8Array(a))};q.string8ToArrayBuffer=function(a){for(var c=new ArrayBuffer(a.length),b=new Uint8Array(c),d=0;d<a.length;d++)b[d]=a.charCodeAt(d);return c};q.setString8InBuffer=function(a,c,b){b=void 0===b?0:b;if(0>b)console.warn("The byte offset cannot be negative.");
else if(c&&c instanceof ArrayBuffer)if(a.length+b>c.byteLength)console.warn("The string is too long to be writen in this buffer.");else{c=new Uint8Array(c);for(var d=0;d<a.length;d++)c[d+b]=a.charCodeAt(d)}else console.warn("The buffer must be a valid ArrayBuffer.")};q.getString8FromBuffer=function(a,c,b){b=void 0===b?0:b;return 0>b?(console.warn("The byte offset cannot be negative."),null):a&&a instanceof ArrayBuffer?c+b>a.byteLength?(console.warn("The string is too long to be writen in this buffer."),
null):String.fromCharCode.apply(null,new Uint8Array(a,b,c)):(console.warn("The buffer must be a valid ArrayBuffer."),null)};q.objectToArrayBuffer=function(a){var c=null;try{var b=JSON.stringify(a),c=q.string16ToArrayBuffer(b)}catch(d){console.warn(d)}return c};q.ArrayBufferToObject=function(a){var c=null;try{var b=q.arrayBufferToString16(a),c=JSON.parse(b)}catch(d){console.warn(d)}return c};q.isTypedArray=function(a){return a instanceof Int8Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||
a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array};q.mergeBuffers=function(a){for(var c=0,b=0;b<a.length;b++)c+=a[b].byteLength;for(var c=new Uint8Array(c),d=0,b=0;b<a.length;b++)c.set(new Uint8Array(a[b]),d),d+=a[b].byteLength;return c.buffer};q.getGlobalObject=function(){var a=null;try{a=window}catch(c){try{a=GLOBAL}catch(b){return console.warn("You are not in a Javascript environment?? Weird."),
null}}return a};q.extractTypedArray=function(a,c,b,d){if(!a)return console.warn("Input Buffer is null."),null;if(!(a instanceof ArrayBuffer))return console.warn("Buffer must be of type ArrayBuffer"),null;if(0>=d)return console.warn("The number of elements to fetch must be greater than 0"),null;if(0>c)return console.warn("The byte offset must be possitive or 0"),null;if(c>=a.byteLength)return console.warn("The offset cannot be larger than the size of the buffer."),null;if(b instanceof Function&&!("BYTES_PER_ELEMENT"in
b))return console.warn("ArrayType must be a typed array constructor function."),null;if(b.BYTES_PER_ELEMENT*d+c>a.byteLength)console.warn("The requested number of elements is too large for this buffer");else return a=a.slice(c,c+d*b.BYTES_PER_ELEMENT),new b(a)};q.getTypedArrayInfo=function(a){var c=null,b=!1;a instanceof Int8Array?(c="int",b=!1):a instanceof Uint8Array?(c="int",b=!0):a instanceof Uint8ClampedArray?(c="int",b=!0):a instanceof Int16Array?(c="int",b=!1):a instanceof Uint16Array?(c="int",
b=!0):a instanceof Int32Array?(c="int",b=!1):a instanceof Uint32Array?(c="int",b=!0):a instanceof Float32Array?(c="float",b=!1):a instanceof Float64Array&&(c="float",b=!1);return{type:c,signed:b,bytesPerElements:a.BYTES_PER_ELEMENT,byteLength:a.byteLength,length:a.length}};var L=function(){this._compress=!1;this.reset()};L.prototype.reset=function(){this._output=this._inputCase=this._input=null};L.prototype.enableDataCompression=function(a){this._compress=a};L.prototype.setInput=function(a){if(this._inputCase=
L.isGoodCandidate(a))this._input=a};L.prototype.getOutput=function(){return this._output};L.isGoodCandidate=function(a){if(!a)return console.warn("Input object cannot be null."),!1;if(!("_metadata"in a))return console.warn("Input object must contain a _metadata object."),!1;if(!("_data"in a))return console.warn("Input object must contain a _data object."),!1;var c=a._metadata;a=a._data;try{JSON.stringify(c)}catch(b){return console.warn("The metadata object contains cyclic structures. Cannot be used."),
!1}c=L.determineDataCase(a);null===c&&console.warn("The input is invalid.");return c};L.prototype.run=function(){var a=this._input;if(a&&this._inputCase){var c=a._data,b=null,d=[],f=!1;switch(this._inputCase){case 1:var g=q.getTypedArrayInfo(c);g.compressedByteLength=null;this._compress&&(b=sa.deflate(c.buffer),g.compressedByteLength=b.byteLength);d.push(g);break;case 2:for(var f=!0,b=[],e=0;e<c.length;e++){g=q.getTypedArrayInfo(c[e]);g.compressedByteLength=null;if(this._compress){var k=sa.deflate(c[e].buffer);
g.compressedByteLength=k.byteLength;b.push(k)}d.push(g)}break;case 3:e=c.constructor.name;c=new Uint8Array(q.objectToArrayBuffer(c));g={type:e,compressedByteLength:null,length:c.byteLength};this._compress&&(b=sa.deflate(c),g.compressedByteLength=b.byteLength);d.push(g);break;default:console.warn("A problem occured.");return}this._compress&&(c=b);b=q.objectToArrayBuffer(a._metadata);a=q.objectToArrayBuffer({byteStreamInfo:d,originalBlockType:a.constructor.name,metadataByteLength:b.byteLength});a=[(new Uint8Array([+q.isPlatformLittleEndian()])).buffer,
(new Uint32Array([a.byteLength])).buffer,a,b];if(f)for(e=0;e<c.length;e++)a.push(c[e].buffer);else a.push(c.buffer);this._output=q.mergeBuffers(a)}else console.warn("An input must be given to the PixBlockEncoder.")};L.determineDataCase=function(a){return a instanceof Object?q.isTypedArray(a)?1:a instanceof Array&&a.every(function(a){return q.isTypedArray(a)})?2:3:null};var ca=function(){this.reset()};ca.prototype.reset=function(){this._output=this._input=null};ca.prototype.setInput=function(a){a instanceof
ArrayBuffer?this._input=a:console.warn("Input should be a valid ArrayBuffer")};ca.prototype.getOutput=function(){return this._output};ca.prototype.run=function(){var a=this._input,c=new DataView(a);c.getUint8(0);var b=0;c.getUint8(0);for(var b=b+1,d=c.getUint32(1,b),b=b+4,c=a.slice(b,b+d),c=q.ArrayBufferToObject(c),b=b+d,d=a.slice(b,b+c.metadataByteLength),d=q.ArrayBufferToObject(d),b=b+c.metadataByteLength,f=[],g=0;g<c.byteStreamInfo.length;g++){var e=c.byteStreamInfo[g].compressedByteLength,k=this._getDataTypeFromByteStreamInfo(c.byteStreamInfo[g]);
if(e){var n=new Uint8Array(a,b,e),n=sa.inflate(n),k=k===Object?q.ArrayBufferToObject(n.buffer):new k(n.buffer);f.push(k);b+=e}else k===Object?(e=q.extractTypedArray(a,b,Uint8Array,c.byteStreamInfo[g].length),k=q.ArrayBufferToObject(e.buffer)):k=q.extractTypedArray(a,b,this._getDataTypeFromByteStreamInfo(c.byteStreamInfo[g]),c.byteStreamInfo[g].length),f.push(k),b+=c.byteStreamInfo[g].byteLength}1==f.length&&(f=f[0]);this._output={originalBlockType:c.originalBlockType,_data:f,_metadata:d}};ca.prototype._getDataTypeFromByteStreamInfo=
function(a){var c="Object",b=q.getGlobalObject();"int"===a.type?(c=a.signed?"Uint":"Int",c+=8*a.bytesPerElements+"Array"):"float"===a.type&&(c="Float"+(8*a.bytesPerElements+"Array"),b=q.getGlobalObject());return b[c]};var kb=da(function(a){(function(){function c(a){a?(q[0]=q[16]=q[1]=q[2]=q[3]=q[4]=q[5]=q[6]=q[7]=q[8]=q[9]=q[10]=q[11]=q[12]=q[13]=q[14]=q[15]=0,this.blocks=q,this.buffer8=r):g?(a=new ArrayBuffer(68),this.buffer8=new Uint8Array(a),this.blocks=new Uint32Array(a)):this.blocks=[0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=0;this.finalized=this.hashed=!1;this.first=!0}var b="object"===typeof window,d=b?window:{};d.JS_MD5_NO_WINDOW&&(b=!1);var b=!b&&"object"===typeof self,f=!d.JS_MD5_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node;f?d=rb:b&&(d=self);var b=!d.JS_MD5_NO_COMMON_JS&&!0&&a.exports,g=!d.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,e="0123456789abcdef".split(""),k=[128,32768,8388608,-2147483648],
n=[0,8,16,24],h="hex array digest buffer arrayBuffer base64".split(" "),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),q=[],r;if(g){var l=new ArrayBuffer(68);r=new Uint8Array(l);q=new Uint32Array(l)}if(d.JS_MD5_NO_NODE_JS||!Array.isArray)Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)};var p=function(a){return function(b){return(new c(!0)).update(b)[a]()}},v=function(a){var b=eval("require('crypto')"),c=eval("require('buffer').Buffer");
return function(d){if("string"===typeof d)return b.createHash("md5").update(d,"utf8").digest("hex");if(null===d||void 0===d)throw"input is invalid type";d.constructor===ArrayBuffer&&(d=new Uint8Array(d));return Array.isArray(d)||ArrayBuffer.isView(d)||d.constructor===c?b.createHash("md5").update(new c(d)).digest("hex"):a(d)}};c.prototype.update=function(a){if(!this.finalized){var b="string"!=typeof a;if(b){if(null===a||void 0===a)throw"input is invalid type";a.constructor===d.ArrayBuffer&&(a=new Uint8Array(a))}var c=
a.length;if(b&&("number"!==typeof c||!(Array.isArray(a)||g&&ArrayBuffer.isView(a))))throw"input is invalid type";for(var f,u=0,e,h=this.blocks,k=this.buffer8;u<c;){this.hashed&&(this.hashed=!1,h[0]=h[16],h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0);if(b)if(g)for(e=this.start;u<c&&64>e;++u)k[e++]=a[u];else for(e=this.start;u<c&&64>e;++u)h[e>>2]|=a[u]<<n[e++&3];else if(g)for(e=this.start;u<c&&64>e;++u)f=a.charCodeAt(u),128>f?k[e++]=f:(2048>f?k[e++]=192|f>>
6:(55296>f||57344<=f?k[e++]=224|f>>12:(f=65536+((f&1023)<<10|a.charCodeAt(++u)&1023),k[e++]=240|f>>18,k[e++]=128|f>>12&63),k[e++]=128|f>>6&63),k[e++]=128|f&63);else for(e=this.start;u<c&&64>e;++u)f=a.charCodeAt(u),128>f?h[e>>2]|=f<<n[e++&3]:(2048>f?h[e>>2]|=(192|f>>6)<<n[e++&3]:(55296>f||57344<=f?h[e>>2]|=(224|f>>12)<<n[e++&3]:(f=65536+((f&1023)<<10|a.charCodeAt(++u)&1023),h[e>>2]|=(240|f>>18)<<n[e++&3],h[e>>2]|=(128|f>>12&63)<<n[e++&3]),h[e>>2]|=(128|f>>6&63)<<n[e++&3]),h[e>>2]|=(128|f&63)<<n[e++&
3]);this.lastByteIndex=e;this.bytes+=e-this.start;64<=e?(this.start=e-64,this.hash(),this.hashed=!0):this.start=e}return this}};c.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var a=this.blocks,b=this.lastByteIndex;a[b>>2]|=k[b&3];56<=b&&(this.hashed||this.hash(),a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0);a[14]=this.bytes<<3;this.hash()}};c.prototype.hash=function(){var a,b,c,d,f,e=this.blocks;this.first?(a=e[0]-680876937,
a=(a<<7|a>>>25)-271733879<<0,d=(-1732584194^a&2004318071)+e[1]-117830708,d=(d<<12|d>>>20)+a<<0,c=(-271733879^d&(a^-271733879))+e[2]-1126478375,c=(c<<17|c>>>15)+d<<0,b=(a^c&(d^a))+e[3]-1316259209):(a=this.h0,b=this.h1,c=this.h2,d=this.h3,a+=(d^b&(c^d))+e[0]-680876936,a=(a<<7|a>>>25)+b<<0,d+=(c^a&(b^c))+e[1]-389564586,d=(d<<12|d>>>20)+a<<0,c+=(b^d&(a^b))+e[2]+606105819,c=(c<<17|c>>>15)+d<<0,b+=(a^c&(d^a))+e[3]-1044525330);b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+e[4]-176418897;a=(a<<7|a>>>25)+b<<0;d+=(c^
a&(b^c))+e[5]+1200080426;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+e[6]-1473231341;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+e[7]-45705983;b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+e[8]+1770035416;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+e[9]-1958414417;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+e[10]-42063;c=(c<<17|c>>>15)+d<<0;b+=(a^c&(d^a))+e[11]-1990404162;b=(b<<22|b>>>10)+c<<0;a+=(d^b&(c^d))+e[12]+1804603682;a=(a<<7|a>>>25)+b<<0;d+=(c^a&(b^c))+e[13]-40341101;d=(d<<12|d>>>20)+a<<0;c+=(b^d&(a^b))+e[14]-1502002290;c=(c<<
17|c>>>15)+d<<0;b+=(a^c&(d^a))+e[15]+1236535329;b=(b<<22|b>>>10)+c<<0;a+=(c^d&(b^c))+e[1]-165796510;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+e[6]-1069501632;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+e[11]+643717713;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+e[0]-373897302;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+e[5]-701558691;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+e[10]+38016083;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+e[15]-660478335;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+e[4]-405537848;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+e[9]+
568446438;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+e[14]-1019803690;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+e[3]-187363961;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+e[8]+1163531501;b=(b<<20|b>>>12)+c<<0;a+=(c^d&(b^c))+e[13]-1444681467;a=(a<<5|a>>>27)+b<<0;d+=(b^c&(a^b))+e[2]-51403784;d=(d<<9|d>>>23)+a<<0;c+=(a^b&(d^a))+e[7]+1735328473;c=(c<<14|c>>>18)+d<<0;b+=(d^a&(c^d))+e[12]-1926607734;b=(b<<20|b>>>12)+c<<0;f=b^c;a+=(f^d)+e[5]-378558;a=(a<<4|a>>>28)+b<<0;d+=(f^a)+e[8]-2022574463;d=(d<<11|d>>>21)+a<<0;f=d^a;c+=
(f^b)+e[11]+1839030562;c=(c<<16|c>>>16)+d<<0;b+=(f^c)+e[14]-35309556;b=(b<<23|b>>>9)+c<<0;f=b^c;a+=(f^d)+e[1]-1530992060;a=(a<<4|a>>>28)+b<<0;d+=(f^a)+e[4]+1272893353;d=(d<<11|d>>>21)+a<<0;f=d^a;c+=(f^b)+e[7]-155497632;c=(c<<16|c>>>16)+d<<0;b+=(f^c)+e[10]-1094730640;b=(b<<23|b>>>9)+c<<0;f=b^c;a+=(f^d)+e[13]+681279174;a=(a<<4|a>>>28)+b<<0;d+=(f^a)+e[0]-358537222;d=(d<<11|d>>>21)+a<<0;f=d^a;c+=(f^b)+e[3]-722521979;c=(c<<16|c>>>16)+d<<0;b+=(f^c)+e[6]+76029189;b=(b<<23|b>>>9)+c<<0;f=b^c;a+=(f^d)+e[9]-
640364487;a=(a<<4|a>>>28)+b<<0;d+=(f^a)+e[12]-421815835;d=(d<<11|d>>>21)+a<<0;f=d^a;c+=(f^b)+e[15]+530742520;c=(c<<16|c>>>16)+d<<0;b+=(f^c)+e[2]-995338651;b=(b<<23|b>>>9)+c<<0;a+=(c^(b|~d))+e[0]-198630844;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+e[7]+1126891415;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+e[14]-1416354905;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+e[5]-57434055;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+e[12]+1700485571;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+e[3]-1894986606;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+e[10]-
1051523;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+e[1]-2054922799;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+e[8]+1873313359;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+e[15]-30611744;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+e[6]-1560198380;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+e[13]+1309151649;b=(b<<21|b>>>11)+c<<0;a+=(c^(b|~d))+e[4]-145523070;a=(a<<6|a>>>26)+b<<0;d+=(b^(a|~c))+e[11]-1120210379;d=(d<<10|d>>>22)+a<<0;c+=(a^(d|~b))+e[2]+718787259;c=(c<<15|c>>>17)+d<<0;b+=(d^(c|~a))+e[9]-343485551;b=(b<<21|b>>>11)+c<<0;this.first?
(this.h0=a+1732584193<<0,this.h1=b-271733879<<0,this.h2=c-1732584194<<0,this.h3=d+271733878<<0,this.first=!1):(this.h0=this.h0+a<<0,this.h1=this.h1+b<<0,this.h2=this.h2+c<<0,this.h3=this.h3+d<<0)};c.prototype.hex=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return e[a>>4&15]+e[a&15]+e[a>>12&15]+e[a>>8&15]+e[a>>20&15]+e[a>>16&15]+e[a>>28&15]+e[a>>24&15]+e[b>>4&15]+e[b&15]+e[b>>12&15]+e[b>>8&15]+e[b>>20&15]+e[b>>16&15]+e[b>>28&15]+e[b>>24&15]+e[c>>4&15]+e[c&15]+e[c>>12&15]+
e[c>>8&15]+e[c>>20&15]+e[c>>16&15]+e[c>>28&15]+e[c>>24&15]+e[d>>4&15]+e[d&15]+e[d>>12&15]+e[d>>8&15]+e[d>>20&15]+e[d>>16&15]+e[d>>28&15]+e[d>>24&15]};c.prototype.toString=c.prototype.hex;c.prototype.digest=function(){this.finalize();var a=this.h0,b=this.h1,c=this.h2,d=this.h3;return[a&255,a>>8&255,a>>16&255,a>>24&255,b&255,b>>8&255,b>>16&255,b>>24&255,c&255,c>>8&255,c>>16&255,c>>24&255,d&255,d>>8&255,d>>16&255,d>>24&255]};c.prototype.array=c.prototype.digest;c.prototype.arrayBuffer=function(){this.finalize();
var a=new ArrayBuffer(16),b=new Uint32Array(a);b[0]=this.h0;b[1]=this.h1;b[2]=this.h2;b[3]=this.h3;return a};c.prototype.buffer=c.prototype.arrayBuffer;c.prototype.base64=function(){for(var a,b,c,d="",e=this.array(),f=0;15>f;)a=e[f++],b=e[f++],c=e[f++],d+=m[a>>>2]+m[(a<<4|b>>>4)&63]+m[(b<<2|c>>>6)&63]+m[c&63];a=e[f];return d+=m[a>>>2]+m[a<<4&63]+"=="};l=function(){var a=p("hex");f&&(a=v(a));a.create=function(){return new c};a.update=function(b){return a.create().update(b)};for(var b=0;b<h.length;++b){var d=
h[b];a[d]=p(d)}return a}();b?a.exports=l:d.md5=l})()}),P=function(){this._compress=!0;this.reset()};P.MAGIC_NUMBER=function(){return"PIXPIPE_PIXBIN"};P.prototype.reset=function(){this._inputs=[];this._output=null;this._options={madeWith:"pixbincodec_js",userObject:null,description:null}};P.prototype.enableDataCompression=function(a){this._compress=a};P.prototype.setOption=function(a,c){a in this._options&&(this._options[a]=c)};P.prototype.addInput=function(a){L.isGoodCandidate(a)&&this._inputs.push(a)};
P.prototype.getOutput=function(){return this._output};P.prototype.run=function(){if(this._inputs.length){var a=this,c=new Date,b=q.isPlatformLittleEndian(),d=new L,c={date:c.toISOString(),createdWith:this._options.madeWith,description:this._options.description,userObject:this._options.userObject,pixblocksInfo:[]},f=[],g=c.pixblocksInfo;this._inputs.forEach(function(b,c){d.setInput(b);d.enableDataCompression(a._compress);d.run();var e=d.getOutput();e?(b={type:b.constructor.name,description:"description"in
b._metadata?b._metadata.description:null,byteLength:e.byteLength,checksum:kb(e)},g.push(b),f.push(e)):console.warn("The input of index "+c+" could not be encoded as a PixBlock.")});f.length||console.warn("No input was compatible for PixBlock encoding.");var c=q.objectToArrayBuffer(c),e=P.MAGIC_NUMBER(),k=new ArrayBuffer(e.length+5),n=new DataView(k);q.setString8InBuffer(e,k);n.setUint8(e.length,+b);n.setUint32(e.length+1,c.byteLength,b);b=[k,c].concat(f);this._output=q.mergeBuffers(b)}else console.warn("The encoder must be specified at least one input.")};
var H=function(){this._verifyChecksum=!1;this._binMeta=this._output=this._input=null;this._parsingInfo={offsetToReachFirstBlock:-1,isLittleEndian:-1};this._decodedBlocks={};this._isValid=!1;this.reset()};H.prototype.setInput=function(a){this.reset();a instanceof ArrayBuffer&&(this._input=a,this._isValid=this._parseIndex())};H.prototype.isValid=function(){return this._isValid};H.prototype.getOutput=function(){return this._output};H.prototype.getNumberOfBlocks=function(){return this._binMeta.pixblocksInfo.length};
H.prototype.getBinCreationDate=function(){return this._binMeta.date};H.prototype.getBinDescription=function(){return this._binMeta.description};H.prototype.getBinUserObject=function(){return this._binMeta.userObject};H.prototype.getBlockDescription=function(a){return 0>a||a>=this.getNumberOfBlocks()?(console.warn("The block index is out of range."),null):this._binMeta.pixblocksInfo[a].description};H.prototype.getBlockType=function(a){return 0>a||a>=this.getNumberOfBlocks()?(console.warn("The block index is out of range."),
null):this._binMeta.pixblocksInfo[a].type};H.prototype.reset=function(){this._isValid=!1;this._binMeta=this._output=this._input=null;this._parsingInfo={offsetToReachFirstBlock:-1,isLittleEndian:-1};this._decodedBlocks={}};H.prototype.enableBlockVerification=function(a){this._verifyChecksum=a};H.prototype._parseIndex=function(){var a=this._input;if(!a)return console.warn("Input cannot be null"),!1;var c=a.byteLength,b=P.MAGIC_NUMBER();if(c<b.length+5)return console.warn("This buffer does not match a PixBin file."),
!1;var d=new DataView(a);if(q.getString8FromBuffer(a,b.length)!==b)return console.warn("This file is not of PixBin type. (wrong magic number)"),!1;b=b.length;c=d.getUint8(b);if(0!=c&&1!=c)return console.warn("This file is not of PixBin type. (wrong endianess code)"),!1;b+=1;d=d.getUint32(b,c);b+=4;a=q.ArrayBufferToObject(a.slice(b,b+d));this._parsingInfo.offsetToReachFirstBlock=b+d;this._parsingInfo.isLittleEndian=c;this._binMeta=a;return!0};H.prototype.fetchBlock=function(a,c){c=void 0===c?!1:c;
var b=this.getNumberOfBlocks();if(0>a||a>=b)return console.warn("The block index is out of range."),null;if(a in this._decodedBlocks&&!c)return this._decodedBlocks[a];c=this._parsingInfo.offsetToReachFirstBlock;for(b=0;b<a;b++)c+=this._binMeta.pixblocksInfo[b].byteLength;b=this._binMeta.pixblocksInfo[a];c=this._input.slice(c,c+b.byteLength);if(this._verifyChecksum&&kb(c)!==b.checksum)return console.warn("The block #"+a+" is corrupted."),null;b=new ca;b.setInput(c);b.run();c=b.getOutput();return c?
this._decodedBlocks[a]=c:(console.warn("The block #"+a+" could not be decoded."),null)};R.PixBlockEncoder=L;R.PixBlockDecoder=ca;R.PixBinEncoder=P;R.PixBinDecoder=H;Object.defineProperty(R,"__esModule",{value:!0})});

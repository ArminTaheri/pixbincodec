<html>
<head>
  <title>Test</title>
</head>
<body>
  <!-- importing the automatically build module -->
  <script src="../dist/pixbincodec.js"></script>

  <p>Open Javascript console.</p>

  <script>

    var simpleObject = {
      _data: new Float32Array([12, 14, 16, 2000, 2010, 2011]),
      _metadata: {
        firstname: "john",
        lastname: "Doe",
        date: new Date()
      }
    }

    var blockEncoder = new pixbincodec.PixBlockEncoder();
    blockEncoder.enableDataCompression( true );
    blockEncoder.setInput(simpleObject)
    blockEncoder.run();

    // this buffer is a binary-serialized version of simpleObject
    var simpleBuff = blockEncoder.getOutput();
    console.log( simpleBuff.byteLength );

    var blockDecoder = new pixbincodec.PixBlockDecoder();
    blockDecoder.setInput( simpleBuff )
    blockDecoder.run();

    var simpleObjectDecoded = blockDecoder.getOutput();

    console.log("original:");
    console.log(simpleObject);
    console.log("encoded/decoded:");
    console.log( simpleObjectDecoded );

  </script>

</body>
</html>

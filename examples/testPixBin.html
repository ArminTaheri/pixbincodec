<html>
<head>
  <title>Test</title>
</head>
<body>
  <!-- importing the automatically build module -->
  <script src="../dist/pixbincodec.js"></script>

  <p>Open Javascript console.</p>

  <script>

    var john = {
      _data: new Float32Array([12, 14, 16, 2000, 2010, 2011]),
      _metadata: {
        firstname: "john",
        lastname: "Doe",
        date: new Date(),
        description: "this is the description of the John Doe block."
      }
    }

    // ************** ENCODING *************************************************

    // the encoder
    var pixBinEncoder = new pixbincodec.PixBinEncoder();
    //pixBinEncoder.enableDataCompression( true ); // default: false

    // let's add a block (aka. modality)
    pixBinEncoder.addInput( john );

    // perfom the encoding
    pixBinEncoder.run();

    // the ArrayBuffer that contains the encoded data
    var binBuff = pixBinEncoder.getOutput();

    // ************** DECODING *************************************************

    // the decoder
    var pixBinDecoder = new pixbincodec.PixBinDecoder();
    // do we wish the decoder tp perform a checksum verif for each block?
    pixBinDecoder.enableBlockVerification( true ); // default: false

    // specify the ArrayBuffer to input
    pixBinDecoder.setInput( binBuff );

    // perform the decoding
    pixBinDecoder.run();

    var binData = pixBinDecoder.getOutput();
    var johnClone = binData.blocks[0]

    console.log("Original John");
    console.log(john);

    console.log("John's clone:");
    console.log(johnClone);

    console.log("Bin data (all)");
    console.log( binData );

  </script>

</body>
</html>
